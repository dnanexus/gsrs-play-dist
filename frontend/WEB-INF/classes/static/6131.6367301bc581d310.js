"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[6131],{65992:function(K,h,a){a.r(h),a.d(h,{SubstanceFormNotesModule:function(){return X}});var p=a(48047),u=a(78069),m=a(36362),F=a(80206),S=a(98568),C=a(20265),y=a(24582),O=a(79550),M=a(24874),J=a(35663),e=a(76442),I=a(78444),N=a(44770),Z=a(43365),l=a(90587),x=a(26439),A=a(51279),_=a(52149),f=a(87317),g=a(65590),U=a(84577),P=a(48302),Q=a(14900);function D(n,i){if(1&n){var o=e.EpF();e.TgZ(0,"div",12),e._uU(1," Deleted\xa0 "),e.TgZ(2,"button",13),e.NdJ("click",function(){return e.CHM(o),e.oxw().undoDelete()}),e._UZ(3,"mat-icon",14),e.qZA(),e.qZA()}}function E(n,i){if(1&n&&(e.TgZ(0,"div",2),e.TgZ(1,"div",15),e._UZ(2,"app-domain-references",16,17),e.qZA(),e.qZA()),2&n){var o=e.oxw();e.xp6(2),e.Q6J("referencesUuids",o.note.references)}}var z=function(){var n=function(){function i(o){(0,u.Z)(this,i),this.utilsService=o,this.noteDeleted=new e.vpe}return(0,p.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"note",get:function(){return this.privateNote},set:function(t){this.privateNote=t}},{key:"deleteNote",value:function(){var t=this;this.privateNote.$$deletedCode=this.utilsService.newUUID(),this.privateNote.note||(this.deleteTimer=setTimeout(function(){t.noteDeleted.emit(t.note)},20))}},{key:"undoDelete",value:function(){clearTimeout(this.deleteTimer),delete this.privateNote.$$deletedCode}},{key:"updateAccess",value:function(t){this.note.access=t}}]),i}();return n.\u0275fac=function(o){return new(o||n)(e.Y36(_.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-note-form"]],inputs:{note:"note"},outputs:{noteDeleted:"noteDeleted"},decls:15,vars:5,consts:[[1,"note-form-container"],["class","notification-backdrop",4,"ngIf"],[1,"form-row"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete note",3,"click"],["svgIcon","delete_forever"],[1,"note"],[1,"textarea-label"],["placeholder","Enter text here","required","","name","note",3,"ngModel","ngModelChange"],[3,"access","accessOut"],["class","form-row",4,"ngIf"],[3,"source"],[1,"notification-backdrop"],["mat-icon-button","","matTooltip","Undo",3,"click"],["svgIcon","undo"],[1,"references-container"],[3,"referencesUuids"],["references",""]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,D,4,0,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return t.deleteNote()}),e._UZ(5,"mat-icon",5),e.qZA(),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e._uU(8,"Note"),e.qZA(),e.TgZ(9,"textarea",8),e.NdJ("ngModelChange",function(c){return t.note.note=c}),e._uU(10,"      "),e.qZA(),e.qZA(),e.TgZ(11,"div"),e.TgZ(12,"app-access-manager",9),e.NdJ("accessOut",function(c){return t.updateAccess(c)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(13,E,4,1,"div",10),e._UZ(14,"app-audit-info",11),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.note.$$deletedCode),e.xp6(8),e.Q6J("ngModel",t.note.note),e.xp6(3),e.Q6J("access",t.note.access),e.xp6(1),e.Q6J("ngIf",!t.note.$$deletedCode),e.xp6(1),e.Q6J("source",t.note))},directives:[m.O5,f.lW,g.Hw,l.Fj,l.Q7,l.JJ,l.On,U.h,P.V,Q.n],styles:[".note-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;display:-ms-flexbox;display:flex;z-index:10;background-color:var(--notif-backdrop-bg-color);-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:var(--notif-backdrop-color)}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.references-container[_ngcontent-%COMP%]{width:100%}"]}),n}(),b=a(19975);function k(n,i){if(1&n&&(e.TgZ(0,"mat-form-field",6),e._UZ(1,"input",7),e.qZA()),2&n){var o=e.oxw();e.Q6J("floatLabel","never"),e.xp6(1),e.Q6J("formControl",o.searchControl)}}var T=function(){return[5,10,25,100]};function $(n,i){if(1&n){var o=e.EpF();e.TgZ(0,"mat-paginator",8),e.NdJ("page",function(c){e.CHM(o);var s=e.oxw();return s.pageChange(c,s.analyticsEventCategory)}),e.qZA()}if(2&n){var t=e.oxw();e.Q6J("length",t.filtered&&t.filtered.length||0)("pageIndex",t.page)("pageSize",5)("pageSizeOptions",e.DdM(4,T))}}function H(n,i){1&n&&e._UZ(0,"mat-divider",12),2&n&&e.Q6J("inset",!0)}function j(n,i){if(1&n){var o=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"app-note-form",10),e.NdJ("noteDeleted",function(v){return e.CHM(o),e.oxw().deleteNote(v)}),e.qZA(),e.YNc(2,H,1,1,"mat-divider",11),e.qZA()}if(2&n){var t=i.$implicit,r=i.last;e.Q6J("id","substance-note-"+i.index),e.xp6(1),e.Q6J("note",t),e.xp6(1),e.Q6J("ngIf",!r)}}function w(n,i){if(1&n){var o=e.EpF();e.TgZ(0,"mat-paginator",8),e.NdJ("page",function(c){e.CHM(o);var s=e.oxw();return s.pageChange(c,s.analyticsEventCategory)}),e.qZA()}if(2&n){var t=e.oxw();e.Q6J("length",t.filtered&&t.filtered.length||0)("pageIndex",t.page)("pageSize",5)("pageSizeOptions",e.DdM(4,T))}}function L(n,i){if(1&n){var o=e.EpF();e.TgZ(0,"div",13),e._UZ(1,"span",2),e.TgZ(2,"button",14),e.NdJ("click",function(){return e.CHM(o),e.oxw().addNote()}),e._uU(3," Add note "),e._UZ(4,"mat-icon",15),e.qZA(),e.qZA()}}var B=function(){var n=function(i){function o(t,r,c){var s;return(0,u.Z)(this,o),s=function Y(n,i,o){return i=(0,C.Z)(i),(0,F.Z)(n,(0,S.Z)()?Reflect.construct(i,o||[],(0,C.Z)(n).constructor):i.apply(n,o))}(this,o,[c]),s.substanceFormNotesService=t,s.scrollToService=r,s.gaService=c,s.subscriptions=[],s.analyticsEventCategory="substance form notes",s}return(0,y.Z)(o,i),(0,p.Z)(o,[{key:"ngOnInit",value:function(){this.canAddItemUpdate.emit(!0),this.menuLabelUpdate.emit("Notes")}},{key:"ngAfterViewInit",value:function(){var r=this,c=this.substanceFormNotesService.substanceNotes.subscribe(function(s){r.notes=s,r.filtered=s;var v=r.searchControl.valueChanges.subscribe(function(d){r.filterList(d,r.notes,r.analyticsEventCategory)},function(d){console.log(d)});r.subscriptions.push(v),r.page=0,r.pageChange()});this.subscriptions.push(c)}},{key:"ngOnDestroy",value:function(){this.componentDestroyed.emit(),this.subscriptions.forEach(function(r){r.unsubscribe()})}},{key:"addItem",value:function(){this.addNote()}},{key:"addNote",value:function(){var r=this;this.substanceFormNotesService.addSubstanceNote(),setTimeout(function(){r.scrollToService.scrollToElement("substance-note-0","center")})}},{key:"deleteNote",value:function(r){this.substanceFormNotesService.deleteSubstanceNote(r)}}]),o}(O.u);return n.\u0275fac=function(o){return new(o||n)(e.Y36(J.k),e.Y36(I.i),e.Y36(M.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-substance-form-notes-card"]],features:[e.qOj],decls:7,vars:5,consts:[[1,"flex-row"],["class","search",3,"floatLabel",4,"ngIf"],[1,"middle-fill"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],["class","note","appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],["style","display: flex;",4,"ngIf"],[1,"search",3,"floatLabel"],["matInput","","placeholder","Search",3,"formControl"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["appScrollToTarget","",1,"note",3,"id"],[3,"note","noteDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"],[2,"display","flex"],["mat-button","",3,"click"],["svgIcon","add_circle_outline"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,k,2,2,"mat-form-field",1),e._UZ(2,"span",2),e.qZA(),e.YNc(3,$,1,5,"mat-paginator",3),e.YNc(4,j,3,3,"div",4),e.YNc(5,w,1,5,"mat-paginator",3),e.YNc(6,L,5,0,"div",5)),2&o&&(e.xp6(1),e.Q6J("ngIf",t.notes&&t.notes.length>t.pageSize),e.xp6(2),e.Q6J("ngIf",t.notes&&t.notes.length>5),e.xp6(1),e.Q6J("ngForOf",t.paged),e.xp6(1),e.Q6J("ngIf",t.notes&&t.notes.length>5),e.xp6(1),e.Q6J("ngIf",t.notes&&t.notes.length>0))},directives:[m.O5,N.KE,Z.Nt,l.Fj,l.JJ,l.oH,x.NW,m.sg,A.P,z,b.d,f.lW,g.Hw],styles:[".mat-divider.mat-divider-inset[_ngcontent-%COMP%]{margin-left:0}.mat-divider[_ngcontent-%COMP%]{border-top-color:var(--text-color)}.note[_ngcontent-%COMP%]:nth-child(odd){background-color:var(--nth-child-color-2)}.note[_ngcontent-%COMP%]:nth-child(odd)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:var(--nth-child-color-3)}.note[_ngcontent-%COMP%]:nth-child(even)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:var(--nth-child-color-1)}.note[_ngcontent-%COMP%]     .mat-expansion-panel, .note[_ngcontent-%COMP%]     .mat-table, .note[_ngcontent-%COMP%]     textarea{background-color:var(--regular-transparent-color)}.search[_ngcontent-%COMP%]{width:400px;max-width:100%}"]}),n}(),R=a(64061),V=a(7168),W=a(94673),X=function(){var n=(0,p.Z)(function i(){(0,u.Z)(this,i)});return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,R.o.forChild(B),V.O,b.t,g.Ps,f.ot,W.w,N.lN,l.UX,l.u5,x.TU,Z.c]]}),n}()}}]);
//# sourceMappingURL=6131.6367301bc581d310.js.map