"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[3846],{53846:function(G,h,a){a.r(h),a.d(h,{SubstanceFormSimplifiedCodesModule:function(){return K}});var u=a(48047),f=a(78069),m=a(36362),M=a(10853),Z=a(98568),S=a(20265),P=a(24582),A=a(79550),I=a(33567),J=a(40104),D=a(66452),e=a(76442),E=a(78444),g=a(44770),C=a(43365),l=a(90587),y=a(26439),N=a(51279),Q=a(18291),Y=a(63169),x=a(87317),b=a(40089),T=a(65590),_=a(16667),z=a(84577);function U(o,s){if(1&o){var n=e.EpF();e.TgZ(0,"div",10),e._uU(1," Deleted\xa0 "),e.TgZ(2,"button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw().undoDelete()}),e._UZ(3,"mat-icon",12),e.qZA(),e.qZA()}}var k=function(){var o=function(){return(0,u.Z)(function s(n,t){(0,f.Z)(this,s),this.cvService=n,this.utilsService=t,this.codeDeleted=new e.vpe,this.codeSystemList=[],this.codeTypeList=[]},[{key:"ngOnInit",value:function(){this.getVocabularies(),this.privateCode.access=["protected"]}},{key:"code",get:function(){return this.privateCode},set:function(t){this.privateCode=t}},{key:"getVocabularies",value:function(){var t=this;this.cvService.getDomainVocabulary("CODE_SYSTEM","CODE_TYPE").subscribe(function(i){t.codeSystemList=i.CODE_SYSTEM.list,t.codeSystemDictionary=i.CODE_SYSTEM.dictionary,t.setCodeSystemType(),t.codeTypeList=i.CODE_TYPE.list})}},{key:"deleteCode",value:function(){var t=this;this.privateCode.$$deletedCode=this.utilsService.newUUID(),!this.privateCode.codeSystem&&!this.privateCode.type&&!this.privateCode.code&&(this.deleteTimer=setTimeout(function(){t.codeDeleted.emit(t.privateCode)},2e3))}},{key:"trimWhitespace",value:function(t){this.code.url=t,this.privateCode.url=this.privateCode.url.replace(/[\u200A|\u2009|\u2006|\u2008]/g," ").trim(),this.privateCode.url=t.trim().trim().trim()}},{key:"undoDelete",value:function(){clearTimeout(this.deleteTimer),delete this.privateCode.$$deletedCode}},{key:"setCodeSystemType",value:function(t){t&&(this.code.codeSystem=t),null!=this.privateCode&&null!=this.codeSystemDictionary&&(this.codeSystemType=this.codeSystemDictionary[this.privateCode.codeSystem]&&this.codeSystemDictionary[this.privateCode.codeSystem].systemCategory||"")}},{key:"updateAccess",value:function(t){this.code.access=t}}])}();return o.\u0275fac=function(n){return new(n||o)(e.Y36(Q.I),e.Y36(Y.FW))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-code-form"]],inputs:{code:"code"},outputs:{codeDeleted:"codeDeleted"},decls:11,vars:4,consts:[[1,"code-form-container"],["class","notification-backdrop",4,"ngIf"],[1,"form-row"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete code",3,"click"],["svgIcon","delete_forever"],["required","true","key","Code System","title","Code System","name","code",1,"code-system",3,"model","valueChange"],[1,"code"],["matInput","","placeholder","Code","required","","name","code",3,"ngModel","ngModelChange"],[3,"access","accessOut"],[1,"notification-backdrop"],["mat-icon-button","","matTooltip","Undo",3,"click"],["svgIcon","undo"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,U,4,0,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return t.deleteCode()}),e._UZ(5,"mat-icon",5),e.qZA(),e.qZA(),e.TgZ(6,"app-cv-input",6),e.NdJ("valueChange",function(c){return t.setCodeSystemType(c)}),e.qZA(),e.TgZ(7,"mat-form-field",7),e.TgZ(8,"input",8),e.NdJ("ngModelChange",function(c){return t.code.code=c}),e.qZA(),e.qZA(),e.TgZ(9,"div"),e.TgZ(10,"app-access-manager",9),e.NdJ("accessOut",function(c){return t.updateAccess(c)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",t.code.$$deletedCode),e.xp6(5),e.Q6J("model",t.code.codeSystem),e.xp6(2),e.Q6J("ngModel",t.code.code),e.xp6(2),e.Q6J("access",t.code.access))},directives:[m.O5,x.lW,b.gM,T.Hw,_.S,g.KE,C.Nt,l.Fj,l.Q7,l.JJ,l.On,z.h],styles:[".code-form-container[_ngcontent-%COMP%]{padding:10px 3px 4px;position:relative}.collapse[_ngcontent-%COMP%]{padding:10px 5px 6px;position:relative}.resolve[_ngcontent-%COMP%]{padding:0 20px 20px 0;color:var(--primary-color)}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;display:-ms-flexbox;display:flex;z-index:10;background-color:var(--notif-backdrop-bg-color);-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:var(--notif-backdrop-color)}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;padding:0 10px;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .code-system[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.form-row[_ngcontent-%COMP%]   .code-text[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .url[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.key-value-pair[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-item-align:start;align-self:flex-start}.key-value-pair[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{font-size:11px;padding-bottom:3.5px;line-height:11px;color:var(--dark-label-color);font-weight:400;font-family:Roboto,Helvetica Neue,sans-serif}.key-value-pair[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:15.5px}.references-container[_ngcontent-%COMP%]{width:100%}"]}),o}(),O=a(19975);function w(o,s){if(1&o&&(e.TgZ(0,"mat-form-field",5),e._UZ(1,"input",6),e.qZA()),2&o){var n=e.oxw();e.Q6J("floatLabel","never"),e.xp6(1),e.Q6J("formControl",n.searchControl)}}var F=function(){return[5,10,25,100]};function V(o,s){if(1&o){var n=e.EpF();e.TgZ(0,"mat-paginator",7),e.NdJ("page",function(c){e.CHM(n);var r=e.oxw();return r.pageChange(c,r.analyticsEventCategory)}),e.qZA()}if(2&o){var t=e.oxw();e.Q6J("length",t.filtered&&t.filtered.length||0)("pageIndex",t.page)("pageSize",10)("pageSizeOptions",e.DdM(4,F))}}function $(o,s){1&o&&e._UZ(0,"mat-divider",11),2&o&&e.Q6J("inset",!0)}function j(o,s){if(1&o){var n=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"app-code-form",9),e.NdJ("codeDeleted",function(v){return e.CHM(n),e.oxw().deleteCode(v)}),e.qZA(),e.YNc(2,$,1,1,"mat-divider",10),e.qZA()}if(2&o){var t=s.$implicit,i=s.last,c=s.index,r=e.oxw();e.Q6J("id","substance-code-"+c),e.xp6(1),e.Q6J("code",t)("show",r.expanded),e.xp6(1),e.Q6J("ngIf",!i)}}function H(o,s){if(1&o){var n=e.EpF();e.TgZ(0,"mat-paginator",7),e.NdJ("page",function(c){e.CHM(n);var r=e.oxw();return r.pageChange(c,r.analyticsEventCategory)}),e.qZA()}if(2&o){var t=e.oxw();e.Q6J("length",t.filtered&&t.filtered.length||0)("pageIndex",t.page)("pageSize",10)("pageSizeOptions",e.DdM(4,F))}}var W=function(){var o=function(s){function n(t,i,c,r){var d;return(0,f.Z)(this,n),d=function L(o,s,n){return s=(0,S.Z)(s),(0,M.Z)(o,(0,Z.Z)()?Reflect.construct(s,n||[],(0,S.Z)(o).constructor):s.apply(o,n))}(this,n,[r]),d.substanceFormCodesService=t,d.substanceFormService=i,d.scrollToService=c,d.gaService=r,d.subscriptions=[],d.pageSize=10,d.expanded=!0,d.validate=!1,d.analyticsEventCategory="substance form codes",d}return(0,P.Z)(n,s),(0,u.Z)(n,[{key:"ngOnInit",value:function(){this.menuLabelUpdate.emit("Codes")}},{key:"collapse",value:function(){this.expanded=!this.expanded}},{key:"ngAfterViewInit",value:function(){var i=this,c=this.substanceFormService.definition.subscribe(function(d){d.definitionType&&"ALTERNATIVE"===d.definitionType?i.hiddenStateUpdate.emit(!0):(i.canAddItemUpdate.emit(!0),i.hiddenStateUpdate.emit(!1))});this.subscriptions.push(c);var r=this.substanceFormCodesService.substanceCodes.subscribe(function(d){i.codes=d,i.filtered=d;var v=i.searchControl.valueChanges.subscribe(function(p){i.filterList(p,i.codes,i.analyticsEventCategory)},function(p){console.log(p)});i.subscriptions.push(v),i.page=0,i.pageChange()});this.subscriptions.push(r)}},{key:"ngOnDestroy",value:function(){this.componentDestroyed.emit(),this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"addItem",value:function(){this.addCode()}},{key:"addCode",value:function(){var i=this;this.substanceFormCodesService.addSubstanceCode(),setTimeout(function(){i.scrollToService.scrollToElement("substance-code-0","center")})}},{key:"deleteCode",value:function(i){this.substanceFormCodesService.deleteSubstanceCode(i)}}])}(A.u);return o.\u0275fac=function(n){return new(n||o)(e.Y36(D.W),e.Y36(I.B),e.Y36(E.i),e.Y36(J.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-substance-form-codes-card"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"flex-row"],["class","search",3,"floatLabel",4,"ngIf"],[1,"middle-fill"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],["class","code","appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],[1,"search",3,"floatLabel"],["matInput","","placeholder","Search",3,"formControl"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["appScrollToTarget","",1,"code",3,"id"],[3,"code","show","codeDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,w,2,2,"mat-form-field",1),e._UZ(2,"span",2),e.qZA(),e.YNc(3,V,1,5,"mat-paginator",3),e.YNc(4,j,3,4,"div",4),e.YNc(5,H,1,5,"mat-paginator",3)),2&n&&(e.xp6(1),e.Q6J("ngIf",t.codes&&t.codes.length>t.pageSize),e.xp6(2),e.Q6J("ngIf",t.codes&&t.codes.length>5),e.xp6(1),e.Q6J("ngForOf",t.paged),e.xp6(1),e.Q6J("ngIf",t.codes&&t.codes.length>5))},directives:[m.O5,g.KE,C.Nt,l.Fj,l.JJ,l.oH,y.NW,m.sg,N.P,k,O.d],styles:[".mat-divider.mat-divider-inset[_ngcontent-%COMP%]{margin-left:0}.mat-divider[_ngcontent-%COMP%]{border-top-color:var(--text-color)}.code[_ngcontent-%COMP%]:nth-child(odd){background-color:var(--nth-child-color-2)}.code[_ngcontent-%COMP%]:nth-child(odd)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:var(--nth-child-color-3)}.code[_ngcontent-%COMP%]:nth-child(even)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:var(--nth-child-color-1)}.code[_ngcontent-%COMP%]     .mat-expansion-panel, .code[_ngcontent-%COMP%]     .mat-table, .code[_ngcontent-%COMP%]     textarea{background-color:var(--regular-transparent-color)}.search[_ngcontent-%COMP%]{width:400px;max-width:100%}"]}),o}(),R=a(75143),B=a(7168),X=a(94673),K=(a(64061),function(){var o=(0,u.Z)(function s(){(0,f.Z)(this,s)});return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.ez,R.o0.forChild(W),B.O,O.t,T.Ps,x.ot,X.w,g.lN,l.UX,l.u5,y.TU,C.c,b.AV]]}),o}())}}]);
//# sourceMappingURL=3846.e6b742d3fe71787f.js.map