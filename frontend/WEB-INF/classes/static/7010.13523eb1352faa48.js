"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[7010],{87010:function(et,d,s){s.r(d),s.d(d,{SubstanceHistoryModule:function(){return nt}});var v=s(48047),f=s(78069),m=s(36362),b=s(10853),S=s(98568),p=s(20265),T=s(24582),x=s(2756),H=s(12570),A=s(50253),U=s(22544),t=s(76442),h=s(98002),Y=s(83448),N=s(54244),y=s(95758),u=s(97217);function V(n,e){1&n&&(t.TgZ(0,"th",12),t._uU(1," Displayed "),t.qZA())}function Q(n,e){if(1&n){var o=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",16),t.NdJ("click",function(){t.CHM(o);var r=t.oxw().$implicit;return t.oxw().switchVersion(r.version)}),t._uU(2,"View"),t.qZA(),t.qZA()}}function I(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Viewing "),t.qZA())}function B(n,e){if(1&n&&(t.TgZ(0,"td",13),t.YNc(1,Q,3,0,"span",14),t.YNc(2,I,2,0,"span",15),t.qZA()),2&n){var o=e.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.substance.version!=o.version),t.xp6(1),t.Q6J("ngIf",a.substance.version==o.version)}}function R(n,e){1&n&&(t.TgZ(0,"th",12),t._uU(1," Version "),t.qZA())}function j(n,e){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){var o=e.$implicit;t.xp6(1),t.hij(" ",o.version," ")}}function J(n,e){1&n&&(t.TgZ(0,"th",12),t._uU(1," Version Comments "),t.qZA())}function M(n,e){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){var o=e.$implicit;t.xp6(1),t.hij(" ",o.comments," ")}}function O(n,e){1&n&&(t.TgZ(0,"th",12),t._uU(1," Editor"),t.qZA())}function $(n,e){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){var o=e.$implicit;t.xp6(1),t.hij(" ",o.editor," ")}}function F(n,e){1&n&&(t.TgZ(0,"th",12),t._uU(1," Change Date "),t.qZA())}function z(n,e){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){var o=e.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.created,"short")," ")}}function E(n,e){1&n&&t._UZ(0,"th",12)}function X(n,e){if(1&n){var o=t.EpF();t.TgZ(0,"td",13),t.TgZ(1,"button",16),t.NdJ("click",function(){var i=t.CHM(o).$implicit;return t.oxw().restoreVersion(i.version)}),t._uU(2,"Restore"),t.qZA(),t.qZA()}}function P(n,e){1&n&&t._UZ(0,"tr",18)}function w(n,e){1&n&&t._UZ(0,"tr",19)}var G=function(){var n=function(e){function o(a,r,i,l,Z){var c;return(0,f.Z)(this,o),c=function D(n,e,o){return e=(0,p.Z)(e),(0,b.Z)(n,(0,S.Z)()?Reflect.construct(e,o||[],(0,p.Z)(n).constructor):e.apply(n,o))}(this,o),c.substanceService=a,c.router=r,c.loadingService=i,c.overlayContainerService=l,c.dialog=Z,c.displayedColumns=["view","version","versionComments","editor","changeDate","restore"],c.substanceUpdated=new A.x,c}return(0,T.Z)(o,e),(0,v.Z)(o,[{key:"ngOnInit",value:function(){var r=this;this.substanceService.getEdits(this.substance.uuid).subscribe(function(i){r.versions=i},function(i){}),this.substanceService.checkVersion(this.substance.uuid).subscribe(function(i){r.latest=i}),this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"ngAfterViewInit",value:function(){var r=this;this.substanceUpdated.subscribe(function(i){r.substance=i})}},{key:"switchVersion",value:function(r){this.router.navigate(["/substances/"+this.substance.uuid+"/v/"+r])}},{key:"restoreVersion",value:function(r){var i=this,l=this.dialog.open(U.h,{data:{substance:this.substance,version:r,latest:this.latest},width:"650px",autoFocus:!1,disableClose:!0});this.overlayContainer.style.zIndex="1002",l.afterClosed().subscribe(function(c){i.overlayContainer.style.zIndex=null,c&&"success"===c&&(i.router.onSameUrlNavigation="reload",i.router.navigate(["/substances/"+i.substance.uuid+"/"]))})}}])}(x.B);return n.\u0275fac=function(o){return new(o||n)(t.Y36(H.d),t.Y36(h.F0),t.Y36(Y.b),t.Y36(N.Xj),t.Y36(y.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-substance-history"]],features:[t.qOj],decls:22,vars:3,consts:[[1,"responsive"],["mat-table","",3,"dataSource"],["matColumnDef","view"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","version"],["matColumnDef","versionComments"],["matColumnDef","editor"],["matColumnDef","changeDate"],["matColumnDef","restore"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["class","centered",4,"ngIf"],[1,"mat-raised-button","mat-primary",3,"click"],[1,"centered"],["mat-header-row",""],["mat-row",""]],template:function(o,a){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"table",1),t.ynx(2,2),t.YNc(3,V,2,0,"th",3),t.YNc(4,B,3,2,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,R,2,0,"th",3),t.YNc(7,j,2,1,"td",4),t.BQk(),t.ynx(8,6),t.YNc(9,J,2,0,"th",3),t.YNc(10,M,2,1,"td",4),t.BQk(),t.ynx(11,7),t.YNc(12,O,2,0,"th",3),t.YNc(13,$,2,1,"td",4),t.BQk(),t.ynx(14,8),t.YNc(15,F,2,0,"th",3),t.YNc(16,z,3,4,"td",4),t.BQk(),t.ynx(17,9),t.YNc(18,E,1,0,"th",3),t.YNc(19,X,3,0,"td",4),t.BQk(),t.YNc(20,P,1,0,"tr",10),t.YNc(21,w,1,0,"tr",11),t.qZA(),t.qZA()),2&o&&(t.xp6(1),t.Q6J("dataSource",a.versions),t.xp6(19),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns))},directives:[u.BZ,u.w1,u.fO,u.ge,u.Dz,u.ev,m.O5,u.as,u.XQ,u.nj,u.Gk],pipes:[m.uU],styles:[".centered[_ngcontent-%COMP%]{text-align:center}"]}),n}(),L=s(64061),K=s(43365),W=s(26439),C=s(65590),k=s(64316),q=s(34972),_=s(33865),g=s(90587),tt=s(38277),nt=function(){var n=(0,v.Z)(function e(){(0,f.Z)(this,e)});return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,L.o.forChild(G),u.p0,_.HT,W.TU,K.c,g.UX,g.u5,tt.V,C.Ps,y.Is,k.JX,q.dp,h.Bz,C.Ps]]}),n}()}}]);
//# sourceMappingURL=7010.13523eb1352faa48.js.map