"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[1089],{31089:function(et,f,n){n.r(f),n.d(f,{SubstanceFormStructuralUnitsModule:function(){return tt}});var d=n(48047),m=n(78069),l=n(36362),O=n(75143),x=n(7168),h=n(19975),C=n(65590),y=n(87317),P=n(94673),p=n(44770),u=n(90587),Z=n(26439),M=n(43365),b=n(10853),U=n(98568),S=n(20265),T=n(24582),F=n(79550),A=n(40104),I=n(34470),t=n(76442),w=n(78444),J=n(51279),R=n(27164),N=n(18291),Y=n(63169),D=n(33567),Q=n(27299),j=n(95758),E=n(54244),_=n(9292),$=n(16667),z=n(11307),H=n(14900);function L(o,r){if(1&o&&(t.TgZ(0,"div",26),t._uU(1),t.qZA()),2&o){var i=t.oxw();t.xp6(1),t.hij(" ",i.displayAmount(i.unit.amount)," ")}}function X(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){var i=r.$implicit;t.xp6(1),t.hij(" ",i.text," ")}}function B(o,r){if(1&o&&(t.TgZ(0,"div",27),t.YNc(1,X,2,1,"div",28),t.qZA()),2&o){var i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.errors)}}var k=function(){var o=function(){return(0,d.Z)(function r(i,e,a,s,c,g){var v=this;(0,m.Z)(this,r),this.cvService=i,this.dialog=e,this.utilsService=a,this.substanceService=s,this.overlayContainerService=c,this.substanceFormService=g,this.unitDeleted=new t.vpe,this.subscriptions=[],this.errors=[],this.hidePopup=!1,this.substanceService.showImagePopup.subscribe(function(nt){v.hidePopup=nt})},[{key:"ngOnInit",value:function(){this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"showHidePopup",value:function(){this.hidePopup=!this.hidePopup,this.substanceService.showImagePopup.next(this.hidePopup),this.substanceService.imagePopupUnit.next(this.unit)}},{key:"openAmountDialog",value:function(){var e=this;this.unit.amount||(this.unit.amount={},"SRU-BLOCK"===this.unit.type&&(this.unit.amount={type:"DEGREE OF POLYMERIZATION",units:"per polymer"}));var a=this.dialog.open(R.O,{data:{subsAmount:this.unit.amount},width:"1040px"});this.overlayContainer.style.zIndex="1002";var s=a.afterClosed().subscribe(function(c){e.overlayContainer.style.zIndex=null,e.unit.amount=c});this.subscriptions.push(s)}},{key:"displayAmount",value:function(e){return this.utilsService.displayAmount(e)}},{key:"displayToConnectivity",value:function(e){var a=this.utilsService.sruDisplayToConnectivity(e);this.errors=a.$errors,0===this.errors.length&&(delete a.$errors,this.unit.attachmentMap=a)}},{key:"deleteSRU",value:function(){this.unit.$$deletedCode=this.utilsService.newUUID(),this.unitDeleted.emit(this.unit)}}])}();return o.\u0275fac=function(i){return new(i||o)(t.Y36(N.I),t.Y36(j.uw),t.Y36(Y.FW),t.Y36(Q.d),t.Y36(E.Xj),t.Y36(D.B))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-structural-unit-form"]],inputs:{unit:"unit"},outputs:{unitDeleted:"unitDeleted"},decls:30,vars:8,consts:[[1,"unit-form-container"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete SRU",3,"click"],["svgIcon","delete_forever"],[1,"form-row","full"],[1,"flex-column","related-substance"],["appSubstanceImage","",1,"related-image",3,"entityId","click"],[1,"form-container"],[1,"inner-row-top"],["domain","POLYMER_SRU_TYPE","title","SRU Type",1,"type",3,"model","valueChange"],[1,"label"],["matInput","","placeholder","Label","required","","name","label",3,"ngModel","ngModelChange"],[1,"attachment-count"],["matInput","","placeholder","attachment count","required","","name","attachment count","disabled","",3,"ngModel","ngModelChange"],[1,"inner-row-bottom"],[1,"amount"],[1,"label","padded"],["mat-icon-button","","matTooltip","add",3,"click"],["svgIcon","add_circle_outline"],["class","amount-display",4,"ngIf"],[1,"connectivity-container"],[1,"connectivity"],["matInput","","cdkTextareaAutosize","",3,"ngModel","ngModelChange"],["class","error-container",4,"ngIf"],[1,"form-row"],[3,"source"],[1,"amount-display"],[1,"error-container"],[4,"ngFor","ngForOf"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return e.deleteSRU()}),t._UZ(3,"mat-icon",3),t.qZA(),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"img",6),t.NdJ("click",function(){return e.showHidePopup()}),t.qZA(),t.qZA(),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"app-cv-input",9),t.NdJ("valueChange",function(s){return e.unit.type=s}),t.qZA(),t.TgZ(10,"mat-form-field",10),t.TgZ(11,"input",11),t.NdJ("ngModelChange",function(s){return e.unit.label=s}),t.qZA(),t.qZA(),t.TgZ(12,"mat-form-field",12),t.TgZ(13,"input",13),t.NdJ("ngModelChange",function(s){return e.unit.attachmentCount=s}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",14),t.TgZ(15,"div",15),t.TgZ(16,"div",16),t._uU(17," Amount "),t.qZA(),t.TgZ(18,"button",17),t.NdJ("click",function(){return e.openAmountDialog()}),t._UZ(19,"mat-icon",18),t.qZA(),t.YNc(20,L,2,1,"div",19),t.qZA(),t.TgZ(21,"div",20),t.TgZ(22,"mat-form-field",21),t.TgZ(23,"mat-label"),t._uU(24,"Connectivity"),t.qZA(),t.TgZ(25,"textarea",22),t.NdJ("ngModelChange",function(s){return e.displayToConnectivity(s)}),t._uU(26,"          "),t.qZA(),t.qZA(),t.YNc(27,B,2,1,"div",23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",24),t._UZ(29,"app-audit-info",25),t.qZA()),2&i&&(t.xp6(6),t.Q6J("entityId",e.unit&&(e.unit.uuid||e.unit._structure&&e.unit._structure.id)),t.xp6(3),t.Q6J("model",e.unit.type),t.xp6(2),t.Q6J("ngModel",e.unit.label),t.xp6(2),t.Q6J("ngModel",e.unit.attachmentCount),t.xp6(7),t.Q6J("ngIf",e.unit.amount),t.xp6(5),t.Q6J("ngModel",e.unit._displayConnectivity),t.xp6(2),t.Q6J("ngIf",e.errors&&e.errors.length>0),t.xp6(2),t.Q6J("source",e.unit))},directives:[y.lW,C.Hw,_.m,$.S,p.KE,M.Nt,u.Fj,u.Q7,u.JJ,u.On,l.O5,p.hX,z.IC,l.sg,H.n],styles:[".unit-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative;display:-ms-flexbox;display:flex}.related-substance[_ngcontent-%COMP%]{max-width:20%;width:20%;cursor:pointer}  .related-substance img{max-width:125px!important;margin:auto}.full[_ngcontent-%COMP%]{width:100%}.form-container[_ngcontent-%COMP%]{width:80%}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;display:-ms-flexbox;display:flex;z-index:10;background-color:var(--notif-backdrop-bg-color);-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:var(--notif-backdrop-color)}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .attachment-count[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .connectivity[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.form-row[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{width:50%;padding-right:15px}.inner-row-top[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.inner-row-top[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.inner-row-top[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .inner-row-top[_ngcontent-%COMP%]   .attachment-count[_ngcontent-%COMP%], .inner-row-top[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.inner-row-top[_ngcontent-%COMP%]   .connectivity[_ngcontent-%COMP%]{width:100%}.inner-row-top[_ngcontent-%COMP%]   .connectivity-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.inner-row-top[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{width:50%;padding-right:15px}.inner-row-bottom[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.inner-row-bottom[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{width:50%;padding-right:15px}.references-container[_ngcontent-%COMP%]{width:100%}.padded[_ngcontent-%COMP%]{padding-right:20px}.amount-display[_ngcontent-%COMP%]{padding-top:11px}.form-actions[_ngcontent-%COMP%]{-ms-flex-pack:start;justify-content:flex-start;margin:5px 0 10px}.form-content[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.mod-type[_ngcontent-%COMP%], .location-type[_ngcontent-%COMP%], .sites[_ngcontent-%COMP%], .group-access[_ngcontent-%COMP%], .extent[_ngcontent-%COMP%], .amount[_ngcontent-%COMP%]{width:33%}.group[_ngcontent-%COMP%], .access[_ngcontent-%COMP%]{width:45%}"]}),o}();function V(o,r){1&o&&t._UZ(0,"mat-divider",5),2&o&&t.Q6J("inset",!0)}function W(o,r){if(1&o){var i=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"app-structural-unit-form",3),t.NdJ("unitDeleted",function(g){return t.CHM(i),t.oxw().deleteSRU(g)}),t.qZA(),t.YNc(2,V,1,1,"mat-divider",4),t.qZA()}if(2&o){var e=r.$implicit,a=r.last;t.Q6J("id","substance-structural-unit-"+r.index),t.xp6(1),t.Q6J("unit",e),t.xp6(1),t.Q6J("ngIf",!a)}}var G=function(){var o=function(r){function i(e,a,s){var c;return(0,m.Z)(this,i),c=function K(o,r,i){return r=(0,S.Z)(r),(0,b.Z)(o,(0,U.Z)()?Reflect.construct(r,i||[],(0,S.Z)(o).constructor):r.apply(o,i))}(this,i,[s]),c.substanceFormStructuralUnitsService=e,c.scrollToService=a,c.gaService=s,c.subscriptions=[],c.analyticsEventCategory="substance form structural units",c}return(0,T.Z)(i,r),(0,d.Z)(i,[{key:"ngOnInit",value:function(){this.menuLabelUpdate.emit("Structural Units")}},{key:"ngAfterViewInit",value:function(){var a=this,s=this.substanceFormStructuralUnitsService.substanceSRUs.subscribe(function(c){a.structuralUnits=c});this.subscriptions.push(s)}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(a){a.unsubscribe()})}},{key:"deleteSRU",value:function(a){this.substanceFormStructuralUnitsService.deleteSubstanceSRU(a)}}])}(F.u);return o.\u0275fac=function(i){return new(i||o)(t.Y36(I.Z),t.Y36(w.i),t.Y36(A.$))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-substance-form-structural-units-card"]],features:[t.qOj],decls:2,vars:1,consts:[[1,"responsive"],["class","alternate-backgrounds","appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],["appScrollToTarget","",1,"alternate-backgrounds",3,"id"],[3,"unit","unitDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t.YNc(1,W,3,3,"div",1),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngForOf",e.structuralUnits))},directives:[l.sg,J.P,k,l.O5,h.d],styles:[".mat-divider.mat-divider-inset[_ngcontent-%COMP%]{margin-left:0}.mat-divider[_ngcontent-%COMP%]{border-top-color:var(--box-shadow-color-3)}.code[_ngcontent-%COMP%]:nth-child(odd){background-color:var(--nth-child-color-2)}.code[_ngcontent-%COMP%]:nth-child(odd)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:var(--nth-child-color-3)}.code[_ngcontent-%COMP%]:nth-child(even)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:var(--nth-child-color-1)}.code[_ngcontent-%COMP%]     .mat-expansion-panel, .code[_ngcontent-%COMP%]     .mat-table, .code[_ngcontent-%COMP%]     textarea{background-color:var(--regular-transparent-color)}"]}),o}(),q=n(24054),tt=(n(64061),function(){var o=(0,d.Z)(function r(){(0,m.Z)(this,r)});return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[l.ez,O.o0.forChild(G),x.O,h.t,C.Ps,y.ot,P.w,p.lN,u.UX,u.u5,Z.TU,M.c,q.f]]}),o}())}}]);
//# sourceMappingURL=1089.3517a8f950c44d91.js.map