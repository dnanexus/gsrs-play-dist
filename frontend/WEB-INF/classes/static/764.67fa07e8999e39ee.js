"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[764],{50764:function(Ui,L,m){m.r(L),m.d(L,{SubstanceProductsModule:function(){return Ei}});var S=m(48047),x=m(78069),g=m(36362),j=m(75143),T=m(80206),A=m(98568),f=m(20265),Z=m(24582),D=m(40104),H=m(42154),G=m(68756),t=m(76442),U=function(){var e=function(a){function n(o,i){var s;return(0,x.Z)(this,n),s=function W(e,a,n){return a=(0,f.Z)(a),(0,T.Z)(e,(0,A.Z)()?Reflect.construct(a,n||[],(0,f.Z)(e).constructor):a.apply(e,n))}(this,n,[o]),s.gaService=o,s.service=i,s.results=[],s.isAdmin=!1,s}return(0,Z.Z)(n,a),(0,S.Z)(n,[{key:"ngOnInit",value:function(){}},{key:"setPageEvent",value:function(i){null!=i&&(this.page=i.pageIndex,this.pageSize=i.pageSize)}},{key:"setResultData",value:function(i,s){this.results=i,this.filtered=i,this.totalRecords=this.service.totalRecords,this.pageChangeFda()}},{key:"pageChangeFda",value:function(i,s){if(this.paged=[],this.filtered)for(var c=0;c<this.filtered.length&&null!=this.filtered[c];c++)this.paged.push(this.filtered[c])}}]),n}(G.uJ);return e.\u0275fac=function(n){t.$Z()},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e}(),k=m(53141),N=m(44250),Q=m(59295),I=m(35096),K=m(51674),h=m(98002),P=m(83448),O=m(95758),M=m(12379),w=m(87317),q=m(65590),y=m(74742),p=m(97217),b=m(64316),E=m(26439),X=m(63322),J=m(48968),V=m(4096);function et(e,a){1&e&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"div",3),t.TgZ(3,"b"),t._uU(4,"No Application Found"),t.qZA(),t.qZA(),t._UZ(5,"br"),t.qZA())}function nt(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"span",22),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).export()}),t._UZ(2,"mat-icon",24),t._uU(3," Export All Applications "),t.qZA(),t.qZA()}}function at(e,a){1&e&&(t.TgZ(0,"div",25),t._UZ(1,"mat-progress-spinner",26),t.qZA())}function it(e,a){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Type "),t.qZA())}var ot=function(a){return["/application",a,"edit"]};function st(e,a){if(1&e&&(t.TgZ(0,"a",31),t._UZ(1,"mat-icon",32),t.qZA()),2&e){var n=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,ot,n.id))}}var rt=function(a){return["/application",a]};function ct(e,a){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",29),t._uU(2),t.qZA(),t._uU(3," \xa0\xa0 "),t.YNc(4,st,2,3,"a",30),t.qZA()),2&e){var n=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("routerLink",t.VKq(3,rt,n.id)),t.xp6(1),t.Oqu(n.appType),t.xp6(2),t.Q6J("ngIf",o.isAdmin)}}var ut=function(a,n){return["/application-darrts",a,n]};function lt(e,a){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",29),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"span",33),t._uU(5,"(Integrity)"),t.qZA(),t.qZA()),2&e){var n=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.WLB(2,ut,n.appType,n.appNumber)),t.xp6(1),t.Oqu(n.appType)}}function pt(e,a){if(1&e&&(t.TgZ(0,"td",28),t.YNc(1,ct,5,5,"span",0),t.YNc(2,lt,6,5,"span",0),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngIf",n.fromTable&&"GSRS"===n.fromTable),t.xp6(1),t.Q6J("ngIf",n.fromTable&&"GSRS"!==n.fromTable)}}function dt(e,a){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Number "),t.qZA())}function mt(e,a){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.appNumber," ")}}function _t(e,a){1&e&&(t.TgZ(0,"th",27),t._uU(1," Product Name "),t.qZA())}function vt(e,a){if(1&e&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.productName," ")}}function ft(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,vt,2,1,"div",35),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.applicationProductNameList)}}function gt(e,a){if(1&e&&(t.TgZ(0,"td",28),t.YNc(1,ft,2,1,"div",34),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.applicationProductList)}}function bt(e,a){1&e&&(t.TgZ(0,"th",27),t._uU(1," Sponsor Name "),t.qZA())}function ht(e,a){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.sponsorName," ")}}function Ct(e,a){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Status "),t.qZA())}function St(e,a){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.appStatus," ")}}function xt(e,a){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Sub Type "),t.qZA())}function Tt(e,a){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.appSubType," ")}}function At(e,a){1&e&&t._UZ(0,"tr",37)}function Zt(e,a){1&e&&t._UZ(0,"tr",38)}var yt=function(){return[5,10,25,100]};function Et(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"mat-tab",4),t.TgZ(1,"div",5),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.TgZ(5,"span",6),t._uU(6),t.qZA(),t._uU(7," \xa0\xa0\xa0 "),t.YNc(8,nt,4,0,"span",7),t.qZA(),t.TgZ(9,"div",8),t.YNc(10,at,2,0,"div",9),t.TgZ(11,"table",10),t.NdJ("matSortChange",function(c){return t.CHM(n),t.oxw().sortData(c)}),t.ynx(12,11),t.YNc(13,it,2,0,"th",12),t.YNc(14,pt,3,2,"td",13),t.BQk(),t.ynx(15,14),t.YNc(16,dt,2,0,"th",12),t.YNc(17,mt,2,1,"td",13),t.BQk(),t.ynx(18,15),t.YNc(19,_t,2,0,"th",12),t.YNc(20,gt,2,1,"td",13),t.BQk(),t.ynx(21,16),t.YNc(22,bt,2,0,"th",12),t.YNc(23,ht,2,1,"td",13),t.BQk(),t.ynx(24,17),t.YNc(25,Ct,2,0,"th",12),t.YNc(26,St,2,1,"td",13),t.BQk(),t.ynx(27,18),t.YNc(28,xt,2,0,"th",12),t.YNc(29,Tt,2,1,"td",13),t.BQk(),t.YNc(30,At,1,0,"tr",19),t.YNc(31,Zt,1,0,"tr",20),t.qZA(),t.qZA(),t.TgZ(32,"mat-paginator",21),t.NdJ("page",function(c){return t.CHM(n),t.oxw().getApplicationBySubstanceKeyCenter(c)}),t.qZA(),t.qZA()}if(2&e){var o=a.$implicit,i=t.oxw();t.s9C("label",o),t.xp6(3),t.hij(" ",o,""),t.xp6(3),t.Oqu(i.loadingStatus),t.xp6(2),t.Q6J("ngIf",i.isAdmin&&i.totalRecords>0),t.xp6(2),t.Q6J("ngIf",i.showSpinner),t.xp6(1),t.Q6J("dataSource",i.paged),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(11,yt))}}var Dt=function(){var e=function(a){function n(o,i,s,c,l,d,u){var r;return(0,x.Z)(this,n),r=function tt(e,a,n){return a=(0,f.Z)(a),(0,T.Z)(e,(0,A.Z)()?Reflect.construct(a,n||[],(0,f.Z)(e).constructor):a.apply(e,n))}(this,n,[c,l]),r.router=o,r.authService=i,r.loadingService=s,r.gaService=c,r.applicationService=l,r.generalService=d,r.dialog=u,r.applicationCount=0,r.totalApplication=0,r.centerList=[],r.centerListOriginal=[],r.center="",r.fromTable="",r.loadingStatus="",r.showSpinner=!1,r.foundCenterList=!1,r.loadingComplete=!1,r.privateExport=!1,r.disableExport=!1,r.etag="",r.etagAllExport="",r.countApplicationOut=new t.vpe,r.sortValues=V.R,r.order="$root_appNumber",r.ascDescDir="desc",r.displayedColumns=["appType","appNumber","productName","sponsorName","appStatus","applicationSubType"],r}return(0,Z.Z)(n,a),(0,S.Z)(n,[{key:"ngOnInit",value:function(){var i=this;this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,Q.q)(1)).subscribe(function(s){i.isAdmin=s}),this.bdnum&&(this.getApplicationCenterList(),this.privateSearch="root_applicationProductList_applicationIngredientList_substanceKey:"+this.bdnum,this.getApplicationBySubstanceKeyCenter(null,"initial"))}},{key:"getApplicationCenterList",value:function(){var i=this;this.applicationService.getApplicationCenterList(this.bdnum).subscribe(function(s){i.centerListOriginal=s,i.centerList=s,i.centerList&&i.centerList.length>0&&(i.foundCenterList=!0),i.loadingComplete=!0})}},{key:"applicationTabSelected",value:function(i){if(i){var c=i.tab.textLabel;if(null!=c){this.loadingStatus="Loading data...";var l=c.indexOf(" ");this.center=c.slice(0,l),this.fromTable=c.slice(l+1,c.length)}this.paged=[],this.privateSearch="root_applicationProductList_applicationIngredientList_substanceKey:"+this.bdnum+" AND root_center:"+this.center+" AND root_fromTable: "+this.fromTable,this.getApplicationBySubstanceKeyCenter()}}},{key:"getApplicationBySubstanceKeyCenter",value:function(i,s){var c=this;this.setPageEvent(i),this.showSpinner=!0;var d=this.applicationService.getApplicationAll(this.order,this.page*this.pageSize,this.pageSize,this.privateSearch,this.privateFacetParams).subscribe(function(u){s&&"initial"===s?c.etagAllExport=u.etag:(c.applicationService.totalRecords=u.total,c.applicationCount=u.total,c.setResultData(u.content),c.etag=u.etag,c.countApplicationOut.emit(c.applicationCount))},function(u){c.showSpinner=!1,console.log("error")},function(){c.showSpinner=!1,d.unsubscribe()});this.loadingStatus=""}},{key:"export",value:function(){var i=this;if(this.etagAllExport){var s="xlsx",c=this.getApiExportUrl(this.etagAllExport,s);""!==this.authService.getUser()&&this.dialog.open(I.L,{width:"700px",data:{extension:s,type:"substanceApplication",entity:"applications",hideOptionButtons:!0}}).afterClosed().subscribe(function(d){var u=d.name,r=d.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(c,i.privateExport,u+"."+s,r).subscribe(function(_){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",_.id])},function(_){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.applicationService.getAppAllApiExportUrl(i,s)}},{key:"updateApplicationUrl",get:function(){return this.applicationService.getUpdateApplicationUrl()}},{key:"applicationListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.applicationService.getApplicationListExportUrl(this.bdnum))}},{key:"sortData",value:function(i){var s=this;if(i.active){var c=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&s.displayedColumns[c]===l.displayedColumns&&s.ascDescDir===l.direction&&(s.order=l.value)}),this.getApplicationBySubstanceKeyCenter()}}}]),n}(U);return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.F0),t.Y36(N.e),t.Y36(P.b),t.Y36(D.$),t.Y36(X.I),t.Y36(J.m),t.Y36(O.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-application"]],inputs:{bdnum:"bdnum"},outputs:{countApplicationOut:"countApplicationOut"},features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf"],[3,"selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[1,"padleft25px","colorblue"],[3,"label"],[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"colorred"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","ptCount","matSortDirection","desc","matSortDisableClear","",1,"font12px",3,"dataSource","matSortChange"],["matColumnDef","appType"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appNumber"],["matColumnDef","productName"],["matColumnDef","sponsorName"],["matColumnDef","appStatus"],["matColumnDef","applicationSubType"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["target","_blank",3,"routerLink"],["target","_blank","matTooltip","Edit GSRS Application Record",3,"routerLink",4,"ngIf"],["target","_blank","matTooltip","Edit GSRS Application Record",3,"routerLink"],["svgIcon","edit"],[1,"font10px","colorgray"],[4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],[1,"row"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.YNc(0,et,6,0,"div",0),t.TgZ(1,"mat-tab-group",1),t.NdJ("selectedTabChange",function(s){return o.applicationTabSelected(s)}),t.YNc(2,Et,33,12,"mat-tab",2),t.qZA()),2&n&&(t.Q6J("ngIf",!0===o.loadingComplete&&!1===o.foundCenterList&&0===o.applicationCount),t.xp6(2),t.Q6J("ngForOf",o.centerList))},directives:[g.O5,M.SP,g.sg,M.uX,w.lW,q.Hw,y.Ou,p.BZ,b.YE,p.w1,p.fO,p.ge,b.nU,p.Dz,p.ev,h.yS,p.as,p.XQ,p.nj,p.Gk,E.NW],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font9px[_ngcontent-%COMP%]{font:size 10px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font12px[_ngcontent-%COMP%]{font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),F=m(69638),$=[{value:"default",display:"Relevance"},{value:"^root_trialNumber",display:"NCT Number, Ascending",displayedColumns:"trialNumber",direction:"asc"},{value:"$root_trialNumber",display:"NCT Number, Descending",displayedColumns:"trialNumber",direction:"desc"},{value:"^root_title",display:"Title, Ascending",displayedColumns:"title",direction:"asc"},{value:"$root_title",display:"Title, Descending",displayedColumns:"title",direction:"desc"},{value:"^root_sponsor",display:"Sponsor Name, Ascending",displayedColumns:"sponsor",direction:"asc"},{value:"$root_sponsor",display:"Sponsor Name, Descending",displayedColumns:"sponsor",direction:"desc"},{value:"^root_sponsorName",display:"Sponsor Name, Ascending",displayedColumns:"sponsorName",direction:"asc"},{value:"$root_sponsorName",display:"Sponsor Name, Descending",displayedColumns:"sponsorName",direction:"desc"},{value:"^root_conditions",display:"Conditions, Ascending",displayedColumns:"conditions",direction:"asc"},{value:"$root_conditions",display:"Conditions, Descending",displayedColumns:"conditions",direction:"desc"},{value:"^root_clinicalTrialEuropeMeddraList_meddraTerm",display:"Conditions, Ascending",displayedColumns:"conditionsEU",direction:"asc"},{value:"$root_clinicalTrialEuropeMeddraList_meddraTerm",display:"Conditions, Descending",displayedColumns:"conditionsEU",direction:"desc"}];function Nt(e,a){1&e&&(t.TgZ(0,"div",2),t.TgZ(1,"b"),t._uU(2,"No Clinical Trial US Found"),t.qZA(),t.qZA())}function Pt(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"span",19),t.TgZ(1,"button",20),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).export()}),t._UZ(2,"mat-icon",21),t._uU(3," Export CTs "),t.qZA(),t.qZA()}}function Ot(e,a){1&e&&(t.TgZ(0,"div",22),t._UZ(1,"mat-progress-spinner",23),t.qZA())}function wt(e,a){1&e&&t._UZ(0,"th",24)}function qt(e,a){if(1&e&&(t.TgZ(0,"td",25),t.TgZ(1,"a",26),t._UZ(2,"mat-icon",27),t.qZA(),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("href","edit-clinical-trial/"+n.trialNumber,t.LSH)}}function Yt(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Trial Number"),t.qZA())}function It(e,a){if(1&e&&(t.TgZ(0,"td",25),t.TgZ(1,"a",29),t._uU(2),t.qZA(),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("href","https://clinicaltrials.gov/ct2/show/"+n.trialNumber,t.LSH),t.xp6(1),t.Oqu(n.trialNumber)}}function Mt(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1," Title "),t.qZA())}function kt(e,a){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.title," ")}}function Qt(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1," Sponsor Name "),t.qZA())}function Jt(e,a){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.sponsor," ")}}function Rt(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1," Conditions "),t.qZA())}function Lt(e,a){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.conditions," ")}}function Ft(e,a){1&e&&(t.TgZ(0,"th",24),t._uU(1," Outcome Measures "),t.qZA())}function $t(e,a){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.outcomeMeasures," ")}}function zt(e,a){1&e&&t._UZ(0,"tr",30)}function Bt(e,a){1&e&&t._UZ(0,"tr",31)}var jt=function(){return[5,10,25,100]};function Ht(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",2),t.TgZ(2,"b"),t._uU(3,"Clinical Trials US"),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.qZA(),t.TgZ(5,"div"),t.YNc(6,Pt,4,0,"span",3),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,Ot,2,0,"div",5),t.TgZ(9,"table",6),t.NdJ("matSortChange",function(s){return t.CHM(n),t.oxw().sortData(s)}),t.ynx(10,7),t.YNc(11,wt,1,0,"th",8),t.YNc(12,qt,3,1,"td",9),t.BQk(),t.ynx(13,10),t.YNc(14,Yt,2,0,"th",11),t.YNc(15,It,3,2,"td",9),t.BQk(),t.ynx(16,12),t.YNc(17,Mt,2,0,"th",11),t.YNc(18,kt,2,1,"td",9),t.BQk(),t.ynx(19,13),t.YNc(20,Qt,2,0,"th",11),t.YNc(21,Jt,2,1,"td",9),t.BQk(),t.ynx(22,14),t.YNc(23,Rt,2,0,"th",11),t.YNc(24,Lt,2,1,"td",9),t.BQk(),t.ynx(25,15),t.YNc(26,Ft,2,0,"th",8),t.YNc(27,$t,2,1,"td",9),t.BQk(),t.YNc(28,zt,1,0,"tr",16),t.YNc(29,Bt,1,0,"tr",17),t.qZA(),t.qZA(),t.TgZ(30,"mat-paginator",18),t.NdJ("page",function(s){return t.CHM(n),t.oxw().getSubstanceClinicalTrials(s)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.xp6(6),t.Q6J("ngIf",o.isAdmin),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,jt))}}var Gt=function(){var e=function(a){function n(o,i,s,c,l,d,u){var r;return(0,x.Z)(this,n),r=function Ut(e,a,n){return a=(0,f.Z)(a),(0,T.Z)(e,(0,A.Z)()?Reflect.construct(a,n||[],(0,f.Z)(e).constructor):a.apply(e,n))}(this,n,[o,i]),r.gaService=o,r.clinicalTrialService=i,r.configService=s,r.authService=c,r.loadingService=l,r.router=d,r.dialog=u,r.clinicalTrialCount=0,r.showSpinner=!1,r.subscriptions=[],r.privateExport=!1,r.disableExport=!1,r.etag="",r.etagAllExport="",r.loadingStatus="",r.sortValues=$,r.order="$root_trialNumber",r.ascDescDir="desc",r.countClinicalTrialOut=new t.vpe,r.displayedColumns=["edit","trialNumber","title","sponsor","conditions","outcomemeasures"],r}return(0,Z.Z)(n,a),(0,S.Z)(n,[{key:"ngOnInit",value:function(){var i=this;this.loadedComponents=this.configService.configData.loadedComponents||null,this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,Q.q)(1)).subscribe(function(s){i.isAdmin=s}),this.substanceUuid&&this.getSubstanceClinicalTrials(null,"initial")}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getSubstanceClinicalTrials",value:function(i,s){var c=this;this.setPageEvent(i);var l=this.page*this.pageSize;this.showSpinner=!0;var d=this.clinicalTrialService.getClinicalTrials({searchTerm:this.substanceUuid,cutoff:null,type:"substanceKey",order:this.order,pageSize:this.pageSize,facets:this.privateFacetParams,skip:l}).subscribe(function(u){s&&"initial"===s&&(c.etagAllExport=u.etag),c.clinicalTrialService.totalRecords=u.total,c.setResultData(u.content),c.clinicalTrialCount=u.total,c.etag=u.etag,c.countClinicalTrialOut.emit(c.clinicalTrialCount),c.showSpinner=!1});this.subscriptions.push(d)}},{key:"export",value:function(){var i=this;if(this.etagAllExport){var s="ctus.xlsx",c=this.getApiExportUrl(this.etagAllExport,s);""!==this.authService.getUser()&&this.dialog.open(I.L,{width:"700px",data:{extension:s,type:"substanceClinicalTrialUS",entity:"clinicaltrialsus",hideOptionButtons:!0}}).afterClosed().subscribe(function(d){var u=d.name,r=d.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(c,i.privateExport,u+"."+s,r).subscribe(function(_){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",_.id])},function(_){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.clinicalTrialService.getApiExportUrl(i,s)}},{key:"clinicalTrialListExportUrl",value:function(){null!=this.substanceUuid&&(this.exportUrl=this.clinicalTrialService.getClinicalTrialListExportUrl(this.substanceUuid))}},{key:"sortData",value:function(i){var s=this;if(i.active){var c=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&s.displayedColumns[c]===l.displayedColumns&&s.ascDescDir===l.direction&&(s.order=l.value)}),this.getSubstanceClinicalTrials()}}}]),n}(U);return e.\u0275fac=function(n){return new(n||e)(t.Y36(D.$),t.Y36(F.m),t.Y36(k.E),t.Y36(N.e),t.Y36(P.b),t.Y36(h.F0),t.Y36(O.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-clinical-trials"]],inputs:{substanceUuid:"substanceUuid"},outputs:{countClinicalTrialOut:"countClinicalTrialOut"},features:[t.qOj],decls:2,vars:2,consts:[["class","padtop5px padleft25px font15px colorblue",4,"ngIf"],[4,"ngIf"],[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","nctNumber","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","edit"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","trialNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","title"],["matColumnDef","sponsor"],["matColumnDef","conditions"],["matColumnDef","outcomemeasures"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["target","_blank","title","Edit in new tab",1,"clinical-trials-browse-edit1",3,"href"],["svgIcon","edit",2,"width","20px","height","20px"],["mat-header-cell","","mat-sort-header",""],["target","_blank","title","see clinicaltrials.gov",3,"href"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.YNc(0,Nt,3,0,"div",0),t.YNc(1,Ht,31,9,"div",1)),2&n&&(t.Q6J("ngIf",!o.clinicalTrialCount),t.xp6(1),t.Q6J("ngIf",o.clinicalTrialCount&&o.clinicalTrialCount>0))},directives:[g.O5,w.lW,q.Hw,y.Ou,p.BZ,b.YE,p.w1,p.fO,p.ge,p.Dz,p.ev,b.nU,p.as,p.XQ,p.nj,p.Gk,E.NW],styles:[".clinical-trials-browse-edit1[_ngcontent-%COMP%], .clinical-trials-browse-edit2[_ngcontent-%COMP%]{text-decoration:none}.clinical-trials-browse-edit1[_ngcontent-%COMP%], .clinical-trials-browse-edit2[_ngcontent-%COMP%]{padding-left:.5em;padding-right:.5em}.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.btn1[_ngcontent-%COMP%]{color:var(--maroon-color);background-color:var(--light-yellow-color-3);border-radius:10px 0 0 10px;font-size:16px}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Wt=m(92938);function Xt(e,a){1&e&&(t.TgZ(0,"div",2),t.TgZ(1,"b"),t._uU(2,"No Clinical Trial Europe Found"),t.qZA(),t.qZA())}function Vt(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"span",16),t.TgZ(1,"button",17),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).export()}),t._UZ(2,"mat-icon",18),t._uU(3," Export CTs "),t.qZA(),t.qZA()}}function te(e,a){1&e&&(t.TgZ(0,"div",19),t._UZ(1,"mat-progress-spinner",20),t.qZA())}function ee(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Eudract Number"),t.qZA())}function ne(e,a){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",23),t._uU(2),t.qZA(),t.qZA()),2&e){var n=t.oxw().$implicit;t.xp6(1),t.s9C("href",n.url,t.LSH),t.xp6(1),t.Oqu(n.trialNumber)}}function ae(e,a){if(1&e&&(t.TgZ(0,"td",22),t.YNc(1,ne,3,2,"div",1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngIf",n.trialNumber)}}function ie(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1," Title "),t.qZA())}function oe(e,a){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.title," ")}}function se(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1," Sponsor Name "),t.qZA())}function re(e,a){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.sponsorName," ")}}function ce(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Conditions"),t.qZA())}function ue(e,a){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var n=a.$implicit,o=t.oxw(2);t.xp6(1),t.Oqu(o.joinMeddraTerms(n))}}function le(e,a){1&e&&t._UZ(0,"tr",24)}function pe(e,a){1&e&&t._UZ(0,"tr",25)}var de=function(){return[5,10,25,100]};function me(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",2),t.TgZ(2,"b"),t._uU(3,"Clinical Trials Europe"),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.qZA(),t.TgZ(5,"div"),t.YNc(6,Vt,4,0,"span",3),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,te,2,0,"div",5),t.TgZ(9,"table",6),t.NdJ("matSortChange",function(s){return t.CHM(n),t.oxw().sortData(s)}),t.ynx(10,7),t.YNc(11,ee,2,0,"th",8),t.YNc(12,ae,2,1,"td",9),t.BQk(),t.ynx(13,10),t.YNc(14,ie,2,0,"th",8),t.YNc(15,oe,2,1,"td",9),t.BQk(),t.ynx(16,11),t.YNc(17,se,2,0,"th",8),t.YNc(18,re,2,1,"td",9),t.BQk(),t.ynx(19,12),t.YNc(20,ce,2,0,"th",8),t.YNc(21,ue,2,1,"td",9),t.BQk(),t.YNc(22,le,1,0,"tr",13),t.YNc(23,pe,1,0,"tr",14),t.qZA(),t.qZA(),t.TgZ(24,"mat-paginator",15),t.NdJ("page",function(s){return t.CHM(n),t.oxw().getSubstanceClinicalTrialsEurope(s)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.xp6(6),t.Q6J("ngIf",o.isAdmin),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,de))}}var _e=function(){var e=function(a){function n(o,i,s,c,l,d,u){var r;return(0,x.Z)(this,n),r=function Kt(e,a,n){return a=(0,f.Z)(a),(0,T.Z)(e,(0,A.Z)()?Reflect.construct(a,n||[],(0,f.Z)(e).constructor):a.apply(e,n))}(this,n,[o,i]),r.gaService=o,r.clinicalTrialService=i,r.configService=s,r.authService=c,r.loadingService=l,r.router=d,r.dialog=u,r.clinicalTrialEuCount=0,r.showSpinner=!1,r.subscriptions=[],r.privateExport=!1,r.disableExport=!1,r.etag="",r.etagAllExport="",r.loadingStatus="",r.sortValues=$,r.order="$root_trialNumber",r.ascDescDir="desc",r.countClinicalTrialEuOut=new t.vpe,r.displayedColumns=["trialNumber","title","sponsorName","conditionsEU"],r}return(0,Z.Z)(n,a),(0,S.Z)(n,[{key:"ngOnInit",value:function(){var i=this;this.loadedComponents=this.configService.configData.loadedComponents||null,this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,Q.q)(1)).subscribe(function(s){i.isAdmin=s}),this.substanceUuid&&this.getSubstanceClinicalTrialsEurope(null,"initial")}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getSubstanceClinicalTrialsEurope",value:function(i,s){var c=this;this.setPageEvent(i),this.showSpinner=!0;var l=this.clinicalTrialService.getSubstanceClinicalTrialsEurope(this.substanceUuid,this.page,this.pageSize,this.order).subscribe(function(d){s&&"initial"===s&&(c.etagAllExport=d.etag),c.setResultData(d.content),c.clinicalTrialEuCount=d.total,c.countClinicalTrialEuOut.emit(c.clinicalTrialEuCount),c.showSpinner=!1});this.subscriptions.push(l)}},{key:"export",value:function(){var i=this;if(this.etagAllExport){var s="cteu.xlsx",c=this.getApiExportUrl(this.etagAllExport,s);""!==this.authService.getUser()&&this.dialog.open(I.L,{width:"700px",data:{extension:s,type:"substanceClinicalTrialEU",entity:"clinicaltrialseurope",hideOptionButtons:!0}}).afterClosed().subscribe(function(d){var u=d.name,r=d.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(c,i.privateExport,u+"."+s,r).subscribe(function(_){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",_.id])},function(_){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.clinicalTrialService.getApiEuropeExportUrl(i,s)}},{key:"joinMeddraTerms",value:function(i){if(i)return Wt.map(i.clinicalTrialEuropeMeddraList,"meddraTerm").join("|")}},{key:"sortData",value:function(i){var s=this;if(i.active){var c=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&s.displayedColumns[c]===l.displayedColumns&&s.ascDescDir===l.direction&&(s.order=l.value)}),this.getSubstanceClinicalTrialsEurope()}}}]),n}(U);return e.\u0275fac=function(n){return new(n||e)(t.Y36(D.$),t.Y36(F.m),t.Y36(k.E),t.Y36(N.e),t.Y36(P.b),t.Y36(h.F0),t.Y36(O.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-clinical-trials-eu"]],inputs:{substanceUuid:"substanceUuid"},outputs:{countClinicalTrialEuOut:"countClinicalTrialEuOut"},features:[t.qOj],decls:2,vars:2,consts:[["class","padtop5px padleft25px font15px colorblue",4,"ngIf"],[4,"ngIf"],[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","trialNumber","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","trialNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","sponsorName"],["matColumnDef","conditionsEU"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"href"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.YNc(0,Xt,3,0,"div",0),t.YNc(1,me,25,9,"div",1)),2&n&&(t.Q6J("ngIf",!o.clinicalTrialEuCount),t.xp6(1),t.Q6J("ngIf",o.clinicalTrialEuCount&&o.clinicalTrialEuCount>0))},directives:[g.O5,w.lW,q.Hw,y.Ou,p.BZ,b.YE,p.w1,p.fO,p.ge,b.nU,p.Dz,p.ev,p.as,p.XQ,p.nj,p.Gk,E.NW],styles:[".mat-column-trialNumber[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;-ms-flex:0 0 20%!important;flex:0 0 20%!important;width:20%!important;white-space:nowrap}.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),R=m(43461),ve=m(98969);function ge(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"span",20),t.TgZ(1,"button",21),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).export()}),t._UZ(2,"mat-icon",22),t._uU(3," Export "),t.qZA(),t.qZA()}}function be(e,a){if(1&e&&(t.TgZ(0,"div",18),t.YNc(1,ge,4,0,"span",19),t.qZA()),2&e){var n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isAdmin&&n.adverseEventCount>0)}}function he(e,a){if(1&e&&(t.TgZ(0,"div",23),t.TgZ(1,"a",24),t.TgZ(2,"button",25),t.TgZ(3,"mat-icon"),t._uU(4,"analytics"),t.qZA(),t.TgZ(5,"span",26),t._uU(6,"Analysis by Substance"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){var n=t.oxw();t.xp6(1),t.s9C("href",n.adverseEventShinySubstanceNameURLWithParam,t.LSH)}}function Ce(e,a){1&e&&(t.TgZ(0,"div",27),t._UZ(1,"mat-progress-spinner",28),t.qZA())}function Se(e,a){1&e&&(t.TgZ(0,"th",29),t._uU(1," PT Term "),t.qZA())}function xe(e,a){if(1&e&&(t.TgZ(0,"span",32),t.TgZ(1,"a",33),t.TgZ(2,"mat-icon"),t._uU(3,"analytics"),t.qZA(),t.qZA(),t.qZA()),2&e){var n=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.hYB("href","",o.adverseEventShinyAdverseEventURLWithParam,"",o.getDecodeURL(n.ptTerm),"",t.LSH)}}function Te(e,a){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.YNc(2,xe,4,2,"span",31),t.qZA()),2&e){var n=a.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",n.ptTerm," "),t.xp6(1),t.Q6J("ngIf",!0===o.adverseEventShinyAdverseEventDisplay)}}function Ae(e,a){1&e&&(t.TgZ(0,"th",29),t._uU(1," Prim SOC "),t.qZA())}function Ze(e,a){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.primSoc," ")}}function ye(e,a){1&e&&(t.TgZ(0,"th",29),t._uU(1," Case Count "),t.qZA())}function Ee(e,a){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.caseCount,"")}}function De(e,a){1&e&&(t.TgZ(0,"th",29),t._uU(1," PT Count "),t.qZA())}function Ue(e,a){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",36),t.ALo(2,"titlecase"),t.ALo(3,"titlecase"),t._UZ(4,"div",37),t.qZA(),t.TgZ(5,"span",38),t._uU(6,"FAERS Public Dashboard"),t.qZA(),t.qZA()),2&e){var n=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.FAE("href","",o.FAERSDashboardAdverseEventUrl,"",o.getDecodeURL(t.lcZ(2,5,n.ptTerm)),"",o.FAERSDashboardReactionGroup,"",o.getDecodeURL(t.lcZ(3,7,n.primSoc)),"",t.LSH),t.xp6(3),t.Q6J("innerHTML",n.ptCount,t.oJD)}}function Ne(e,a){if(1&e&&t._UZ(0,"div",37),2&e){var n=t.oxw().$implicit;t.Q6J("innerHTML",n.ptCount,t.oJD)}}function Pe(e,a){if(1&e&&(t.TgZ(0,"td",30),t.YNc(1,Ue,7,9,"div",34),t.YNc(2,Ne,1,1,"ng-template",null,35,t.W1O),t.qZA()),2&e){var n=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.FAERSDashboardAdverseEventUrl)("ngIfElse",n)}}function Oe(e,a){1&e&&(t.TgZ(0,"th",29),t._uU(1," PRR "),t.qZA())}function we(e,a){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.prr,".2-2")," ")}}function qe(e,a){1&e&&t._UZ(0,"tr",39)}function Ye(e,a){1&e&&t._UZ(0,"tr",40)}var Ie=function(){return[5,10,25,100]},Me=function(){var e=function(a){function n(o,i,s,c,l,d,u){var r;return(0,x.Z)(this,n),r=function fe(e,a,n){return a=(0,f.Z)(a),(0,T.Z)(e,(0,A.Z)()?Reflect.construct(a,n||[],(0,f.Z)(e).constructor):a.apply(e,n))}(this,n,[i,s]),r.router=o,r.gaService=i,r.adverseEventService=s,r.loadingService=c,r.configService=l,r.authService=d,r.dialog=u,r.countAdvPtOut=new t.vpe,r.adverseEventCount=0,r.order="$root_ptCount",r.ascDescDir="desc",r.showSpinner=!1,r.sortValues=ve.g,r.privateExport=!1,r.disableExport=!1,r.etag="",r.loadingStatus="",r.subscriptions=[],r.adverseEventShinySubstanceNameDisplay=!1,r.adverseEventShinyAdverseEventDisplay=!1,r.FAERSDashboardSearchTerm="/select/Search%20Term/",r.FAERSDashboardReactionTerm="/select/Reaction%20Term/",r.FAERSDashboardReactionGroup="/select/Reaction%20Group/",r.displayedColumns=["ptTerm","primSoc","caseCount","ptCount","prr"],r}return(0,Z.Z)(n,a),(0,S.Z)(n,[{key:"ngOnInit",value:function(){var i=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(c){i.isAdmin=c});this.subscriptions.push(s),this.bdnum&&(this.getAdverseEventPt(),this.getFaersDashboardUrl(),this.getFaersDashboardRecordByName(),this.adverseEventPtListExportUrl(),this.getAdverseEventShinyConfig())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getAdverseEventPt",value:function(i){var s=this;this.setPageEvent(i),this.showSpinner=!0;var d=this.adverseEventService.getAdverseEventPt(this.order,this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(u){s.adverseEventService.totalRecords=u.total,s.adverseEventCount=u.total,s.setResultData(u.content),s.etag=u.etag,s.countAdvPtOut.emit(s.adverseEventCount)},function(u){s.showSpinner=!1,console.log("error")},function(){s.showSpinner=!1,d.unsubscribe()});this.loadingStatus=""}},{key:"adverseEventPtListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventPtListExportUrl(this.bdnum))}},{key:"sortData",value:function(i){var s=this;if(i.active){var c=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&s.displayedColumns[c]===l.displayedColumns&&s.ascDescDir===l.direction&&(s.order=l.value)}),this.getAdverseEventPt()}}},{key:"export",value:function(){var i=this;if(this.etag){var s="xlsx",c=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(I.L,{width:"700px",data:{extension:s,type:"substanceAdverseEventPt",entity:"adverseeventpt",hideOptionButtons:!0}}).afterClosed().subscribe(function(d){var u=d.name,r=d.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(c,i.privateExport,u+"."+s,r).subscribe(function(_){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",_.id])},function(_){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.adverseEventService.getApiExportUrlPt(i,s)}},{key:"getFaersDashboardRecordByName",value:function(){var i=this,s=this.adverseEventService.getFaersDashboardRecordByName(this.substanceName).subscribe(function(c){c&&c.name&&(i.FAERSDashboardSubstanceName=c.name,i.FAERSDashboardAdverseEventUrl=i.FAERSDashboardAdverseEventUrl+c.name+i.FAERSDashboardReactionTerm)});this.subscriptions.push(s)}},{key:"getFaersDashboardUrl",value:function(){this.configService.configData&&this.configService.configData.FAERSDashboardAdverseEventUrl&&null!==this.configService.configData.FAERSDashboardAdverseEventUrl&&(this.FAERSDashboardAdverseEventUrl=this.configService.configData.FAERSDashboardAdverseEventUrl+this.FAERSDashboardSearchTerm)}},{key:"getAdverseEventShinyConfig",value:function(){this.configService.configData&&(this.configService.configData.adverseEventShinySubstanceNameDisplay&&null!==this.configService.configData.adverseEventShinySubstanceNameDisplay&&(this.adverseEventShinySubstanceNameDisplay=JSON.parse(this.configService.configData.adverseEventShinySubstanceNameDisplay)),this.configService.configData.adverseEventShinySubstanceNameURL&&null!==this.configService.configData.adverseEventShinySubstanceNameURL&&(this.adverseEventShinySubstanceNameURL=this.configService.configData.adverseEventShinySubstanceNameURL,this.adverseEventShinySubstanceNameURLWithParam=this.adverseEventShinySubstanceNameURL+decodeURIComponent(this.substanceName)),this.configService.configData.adverseEventShinyAdverseEventDisplay&&null!==this.configService.configData.adverseEventShinyAdverseEventDisplay&&(this.adverseEventShinyAdverseEventDisplay=JSON.parse(this.configService.configData.adverseEventShinyAdverseEventDisplay)),this.configService.configData.adverseEventShinyAdverseEventURL&&null!==this.configService.configData.adverseEventShinyAdverseEventURL&&(this.adverseEventShinyAdverseEventURL=this.configService.configData.adverseEventShinyAdverseEventURL,this.adverseEventShinyAdverseEventURLWithParam=this.adverseEventShinyAdverseEventURL))}},{key:"getDecodeURL",value:function(i){var s="";return null!==i&&(s=decodeURIComponent(i)),s}}]),n}(U);return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.F0),t.Y36(D.$),t.Y36(R.a),t.Y36(P.b),t.Y36(k.E),t.Y36(N.e),t.Y36(O.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventpt"]],inputs:{bdnum:"bdnum",substanceName:"substanceName"},outputs:{countAdvPtOut:"countAdvPtOut"},features:[t.qOj],decls:28,vars:10,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"divflex"],[1,"padtop10px"],["class","marginleft50px padleft25px padtopneg50px width120px",4,"ngIf"],["class","marginleft50px padleft25px width200px",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","ptCount","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","ptTerm"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","primSoc"],["matColumnDef","caseCount"],["matColumnDef","ptCount"],["matColumnDef","prr"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"marginleft50px","padleft25px","padtopneg50px","width120px"],["class","export",4,"ngIf"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"marginleft50px","padleft25px","width200px"],["target","_blank",3,"href"],["mat-icon-button","","color","accent","aria-label","Analysis by Substance Name on Shiny Server"],[1,"colororange"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","",4,"ngIf"],[1,""],["target","_blank","title","Analysis by Adverse Event/PT Term on Shiny Server",3,"href"],[4,"ngIf","ngIfElse"],["noFaersLink",""],["target","_blank","title","FAERS Public Dashboard",3,"href"],[3,"innerHTML"],[1,"colorgray","font10px"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"b"),t._uU(4,"Adverse Event PT"),t.qZA(),t.qZA(),t.YNc(5,be,2,1,"div",3),t.YNc(6,he,7,1,"div",4),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,Ce,2,0,"div",6),t.TgZ(9,"table",7),t.NdJ("matSortChange",function(s){return o.sortData(s)}),t.ynx(10,8),t.YNc(11,Se,2,0,"th",9),t.YNc(12,Te,3,2,"td",10),t.BQk(),t.ynx(13,11),t.YNc(14,Ae,2,0,"th",9),t.YNc(15,Ze,2,1,"td",10),t.BQk(),t.ynx(16,12),t.YNc(17,ye,2,0,"th",9),t.YNc(18,Ee,2,1,"td",10),t.BQk(),t.ynx(19,13),t.YNc(20,De,2,0,"th",9),t.YNc(21,Pe,4,2,"td",10),t.BQk(),t.ynx(22,14),t.YNc(23,Oe,2,0,"th",9),t.YNc(24,we,3,4,"td",10),t.BQk(),t.YNc(25,qe,1,0,"tr",15),t.YNc(26,Ye,1,0,"tr",16),t.qZA(),t.qZA(),t.TgZ(27,"mat-paginator",17),t.NdJ("page",function(s){return o.getAdverseEventPt(s)}),t.qZA(),t.qZA()),2&n&&(t.xp6(5),t.Q6J("ngIf",o.totalRecords>0),t.xp6(1),t.Q6J("ngIf",!0===o.adverseEventShinySubstanceNameDisplay),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(9,Ie)))},directives:[g.O5,w.lW,q.Hw,y.Ou,p.BZ,b.YE,p.w1,p.fO,p.ge,b.nU,p.Dz,p.ev,p.as,p.XQ,p.nj,p.Gk,E.NW],pipes:[g.rS,g.JJ],styles:[".mat-table-style[_ngcontent-%COMP%]{position:relative}.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.divflex[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.font8px[_ngcontent-%COMP%]{font-size:8px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.margintop10px[_ngcontent-%COMP%]{margin-top:10px}.margintop90px[_ngcontent-%COMP%]{margin-top:90px}marginleft50px[_ngcontent-%COMP%]{margin-left:50px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.padtop10px[_ngcontent-%COMP%]{padding-top:10px}.padtopneg50px[_ngcontent-%COMP%]{padding-top:-50px}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.colororange[_ngcontent-%COMP%]{color:var(--orange-color-rgb-2)}.bordergray[_ngcontent-%COMP%]{border:1px solid var(--regular-grey-color)}.width120px[_ngcontent-%COMP%]{width:120px;display:block}.width200px[_ngcontent-%COMP%]{width:200px;display:block}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),ke=m(52395);function Je(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"span",16),t.TgZ(1,"button",17),t.NdJ("click",function(){return t.CHM(n),t.oxw().export()}),t._UZ(2,"mat-icon",18),t._uU(3," Export "),t.qZA(),t.qZA()}}function Re(e,a){1&e&&(t.TgZ(0,"div",19),t._UZ(1,"mat-progress-spinner",20),t.qZA())}function Le(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1," DME Reactions "),t.qZA())}function Fe(e,a){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.dmeReactions," ")}}function $e(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1," PT Term Meddra "),t.qZA())}function ze(e,a){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.ptTermMeddra," ")}}function Be(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1," Case Count "),t.qZA())}function je(e,a){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.caseCount," ")}}function He(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1," Dme Count "),t.qZA())}function Ge(e,a){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.dmeCount," ")}}function We(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1," Dme Count Percent "),t.qZA())}function Ke(e,a){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.dmeCountPercent," ")}}function Xe(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1," Weighted Average PRR"),t.qZA())}function Ve(e,a){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.weightedAvgPrr,".2-2")," ")}}function tn(e,a){1&e&&t._UZ(0,"tr",23)}function en(e,a){1&e&&t._UZ(0,"tr",24)}var nn=function(){return[5,10,25,100]},an=function(){var e=function(a){function n(o,i,s,c,l,d){var u;return(0,x.Z)(this,n),u=function Qe(e,a,n){return a=(0,f.Z)(a),(0,T.Z)(e,(0,A.Z)()?Reflect.construct(a,n||[],(0,f.Z)(e).constructor):a.apply(e,n))}(this,n,[i,s]),u.router=o,u.gaService=i,u.adverseEventService=s,u.authService=c,u.loadingService=l,u.dialog=d,u.countAdvDmeOut=new t.vpe,u.adverseEventCount=0,u.order="$root_dmeCount",u.ascDescDir="desc",u.showSpinner=!1,u.privateExport=!1,u.disableExport=!1,u.etag="",u.loadingStatus="",u.sortValues=ke.O,u.subscriptions=[],u.displayedColumns=["dmeReactions","ptTermMeddra","caseCount","dmeCount","dmeCountPercent","weightedAvgPrr"],u}return(0,Z.Z)(n,a),(0,S.Z)(n,[{key:"ngOnInit",value:function(){var i=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(c){i.isAdmin=c});this.subscriptions.push(s),this.bdnum&&(this.getAdverseEventDme(),this.adverseEventDmeListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getAdverseEventDme",value:function(i){var s=this;this.setPageEvent(i),this.showSpinner=!0;var d=this.adverseEventService.getAdverseEventDme(this.order,this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(u){s.adverseEventService.totalRecords=u.total,s.adverseEventCount=u.total,s.setResultData(u.content),s.etag=u.etag,s.countAdvDmeOut.emit(s.adverseEventCount)},function(u){s.showSpinner=!1,console.log("error")},function(){s.showSpinner=!1,d.unsubscribe()});this.loadingStatus=""}},{key:"sortData",value:function(i){var s=this;if(i.active){var c=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&s.displayedColumns[c]===l.displayedColumns&&s.ascDescDir===l.direction&&(s.order=l.value)}),this.getAdverseEventDme()}}},{key:"export",value:function(){var i=this;if(this.etag){var s="xlsx",c=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(I.L,{width:"700px",data:{extension:s,type:"substanceAdverseEventDme",entity:"adverseeventdme",hideOptionButtons:!0}}).afterClosed().subscribe(function(d){var u=d.name,r=d.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(c,i.privateExport,u+"."+s,r).subscribe(function(_){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",_.id])},function(_){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.adverseEventService.getApiExportUrlDme(i,s)}},{key:"adverseEventDmeListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventDmeListExportUrl(this.bdnum))}}]),n}(U);return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.F0),t.Y36(D.$),t.Y36(R.a),t.Y36(N.e),t.Y36(P.b),t.Y36(O.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventdme"]],inputs:{bdnum:"bdnum"},outputs:{countAdvDmeOut:"countAdvDmeOut"},features:[t.qOj],decls:29,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","dmeCount","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","dmeReactions"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ptTermMeddra"],["matColumnDef","caseCount"],["matColumnDef","dmeCount"],["matColumnDef","dmeCountPercent"],["matColumnDef","weightedAvgPrr"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Adverse Event DME"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,Je,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,Re,2,0,"div",3),t.TgZ(7,"table",4),t.NdJ("matSortChange",function(s){return o.sortData(s)}),t.ynx(8,5),t.YNc(9,Le,2,0,"th",6),t.YNc(10,Fe,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,$e,2,0,"th",6),t.YNc(13,ze,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,Be,2,0,"th",6),t.YNc(16,je,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,He,2,0,"th",6),t.YNc(19,Ge,2,1,"td",7),t.BQk(),t.ynx(20,11),t.YNc(21,We,2,0,"th",6),t.YNc(22,Ke,2,1,"td",7),t.BQk(),t.ynx(23,12),t.YNc(24,Xe,2,0,"th",6),t.YNc(25,Ve,3,4,"td",7),t.BQk(),t.YNc(26,tn,1,0,"tr",13),t.YNc(27,en,1,0,"tr",14),t.qZA(),t.qZA(),t.TgZ(28,"mat-paginator",15),t.NdJ("page",function(s){return o.getAdverseEventDme(s)}),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin&&o.adverseEventCount>0),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,nn)))},directives:[g.O5,w.lW,q.Hw,y.Ou,p.BZ,b.YE,p.w1,p.fO,p.ge,b.nU,p.Dz,p.ev,p.as,p.XQ,p.nj,p.Gk,E.NW],pipes:[g.JJ],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorpurple[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),on=m(34009);function rn(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"span",14),t.TgZ(1,"button",15),t.NdJ("click",function(){return t.CHM(n),t.oxw().export()}),t._UZ(2,"mat-icon",16),t._uU(3," Export "),t.qZA(),t.qZA()}}function cn(e,a){1&e&&(t.TgZ(0,"div",17),t._UZ(1,"mat-progress-spinner",18),t.qZA())}function un(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1," Adverse Event "),t.qZA())}function ln(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.adverseEvent," ")}}function pn(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1," Species "),t.qZA())}function dn(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.species," ")}}function mn(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1," Adverse Event Count "),t.qZA())}function _n(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.aeCount," ")}}function vn(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1," Route of Administration "),t.qZA())}function fn(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.routeOfAdmin," ")}}function gn(e,a){1&e&&t._UZ(0,"tr",21)}function bn(e,a){1&e&&t._UZ(0,"tr",22)}var hn=function(){return[5,10,25,100]},Cn=function(){var e=function(a){function n(o,i,s,c,l,d){var u;return(0,x.Z)(this,n),u=function sn(e,a,n){return a=(0,f.Z)(a),(0,T.Z)(e,(0,A.Z)()?Reflect.construct(a,n||[],(0,f.Z)(e).constructor):a.apply(e,n))}(this,n,[i,s]),u.router=o,u.gaService=i,u.adverseEventService=s,u.authService=c,u.loadingService=l,u.dialog=d,u.countAdvCvmOut=new t.vpe,u.adverseEventCount=0,u.order="$root_aeCount",u.ascDescDir="desc",u.showSpinner=!1,u.privateExport=!1,u.disableExport=!1,u.etag="",u.loadingStatus="",u.sortValues=on.l,u.subscriptions=[],u.displayedColumns=["adverseEvent","species","adverseEventCount","routeOfAdmin"],u}return(0,Z.Z)(n,a),(0,S.Z)(n,[{key:"ngOnInit",value:function(){var i=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(c){i.isAdmin=c});this.subscriptions.push(s),this.bdnum&&(this.getAdverseEventCvm(),this.adverseEventCvmListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getAdverseEventCvm",value:function(i){var s=this;this.setPageEvent(i),this.showSpinner=!0;var d=this.adverseEventService.getAdverseEventCvm(this.order,this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(u){s.adverseEventService.totalRecords=u.total,s.adverseEventCount=u.total,s.setResultData(u.content),s.etag=u.etag,s.countAdvCvmOut.emit(s.adverseEventCount)},function(u){s.showSpinner=!1,console.log("error")},function(){s.showSpinner=!1,d.unsubscribe()});this.loadingStatus=""}},{key:"sortData",value:function(i){var s=this;if(i.active){var c=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&s.displayedColumns[c]===l.displayedColumns&&s.ascDescDir===l.direction&&(s.order=l.value)}),this.getAdverseEventCvm()}}},{key:"export",value:function(){var i=this;if(this.etag){var s="xlsx",c=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(I.L,{width:"700px",data:{extension:s,type:"substanceAdverseEventCvm",entity:"adverseeventcvm",hideOptionButtons:!0}}).afterClosed().subscribe(function(d){var u=d.name,r=d.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(c,i.privateExport,u+"."+s,r).subscribe(function(_){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",_.id])},function(_){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.adverseEventService.getApiExportUrlCvm(i,s)}},{key:"adverseEventCvmListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventCvmListExportUrl(this.bdnum))}}]),n}(U);return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.F0),t.Y36(D.$),t.Y36(R.a),t.Y36(N.e),t.Y36(P.b),t.Y36(O.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventcvm"]],inputs:{bdnum:"bdnum"},outputs:{countAdvCvmOut:"countAdvCvmOut"},features:[t.qOj],decls:23,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","adverseEventCount","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","adverseEvent"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","species"],["matColumnDef","adverseEventCount"],["matColumnDef","routeOfAdmin"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Adverse Event CVM"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,rn,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,cn,2,0,"div",3),t.TgZ(7,"table",4),t.NdJ("matSortChange",function(s){return o.sortData(s)}),t.ynx(8,5),t.YNc(9,un,2,0,"th",6),t.YNc(10,ln,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,pn,2,0,"th",6),t.YNc(13,dn,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,mn,2,0,"th",6),t.YNc(16,_n,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,vn,2,0,"th",6),t.YNc(19,fn,2,1,"td",7),t.BQk(),t.YNc(20,gn,1,0,"tr",11),t.YNc(21,bn,1,0,"tr",12),t.qZA(),t.qZA(),t.TgZ(22,"mat-paginator",13),t.NdJ("page",function(s){return o.getAdverseEventCvm(s)}),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin&&o.adverseEventCount>0),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,hn)))},directives:[g.O5,w.lW,q.Hw,y.Ou,p.BZ,b.YE,p.w1,p.fO,p.ge,b.nU,p.Dz,p.ev,p.as,p.XQ,p.nj,p.Gk,E.NW],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorpurple[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Sn=m(91781),xn=(m(52489),[{value:"default",display:"Relevance"},{value:"^root_productSubstanceName",display:"Source Type, Ascending",displayedColumns:"productSubstanceName",direction:"asc"},{value:"$root_productSubstanceName",display:"Source Type, Descending",displayedColumns:"productSubstanceName",direction:"desc"},{value:"^root_sourceType",display:"Source Type, Ascending",displayedColumns:"sourceType",direction:"asc"},{value:"$root_sourceType",display:"Source Type, Descending",displayedColumns:"sourceType",direction:"desc"},{value:"^root_source",display:"Source, Ascending",displayedColumns:"source",direction:"asc"},{value:"$root_source",display:"Source, Descending",displayedColumns:"source",direction:"desc"},{value:"^root_sourceId",display:"Source ID, A-Z",displayedColumns:"sourceId",direction:"asc"},{value:"$root_sourceId",display:"Source ID, Z-A",displayedColumns:"sourceId",direction:"desc"},{value:"^root_type",display:"Type, A-Z",displayedColumns:"type",direction:"asc"},{value:"$root_type",display:"Type, Z-A",displayedColumns:"type",direction:"desc"},{value:"^root_specType",display:"Spec Type, A-Z",displayedColumns:"specType",direction:"asc"},{value:"$root_specType",display:"Spec Type, Z-A",displayedColumns:"specType",direction:"desc"}]);function An(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"span",19),t.TgZ(1,"button",20),t.NdJ("click",function(){return t.CHM(n),t.oxw().export()}),t._UZ(2,"mat-icon",21),t._uU(3," Export "),t.qZA(),t.qZA()}}function Zn(e,a){1&e&&(t.TgZ(0,"div",22),t._UZ(1,"mat-progress-spinner",23),t.qZA())}function yn(e,a){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Product/Substance Name"),t.qZA())}function En(e,a){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var n=t.oxw(2).$implicit;t.xp6(1),t.Oqu(n.productSubstanceName)}}function Dn(e,a){1&e&&t._uU(0," View ")}var Un=function(a){return["/impurities",a,"edit"]};function Nn(e,a){if(1&e&&(t.TgZ(0,"a",31),t._UZ(1,"mat-icon",32),t.qZA()),2&e){var n=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,Un,n.id))}}var Pn=function(a){return["/impurities",a]};function On(e,a){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",27),t.YNc(2,En,2,1,"div",28),t.YNc(3,Dn,1,0,"ng-template",null,29,t.W1O),t.qZA(),t._uU(5," \xa0\xa0 "),t.YNc(6,Nn,2,3,"a",30),t.qZA()),2&e){var n=t.MAs(4),o=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(4,Pn,o.id)),t.xp6(1),t.Q6J("ngIf",o.productSubstanceName)("ngIfElse",n),t.xp6(4),t.Q6J("ngIf",i.isAdmin)}}function wn(e,a){if(1&e&&(t.TgZ(0,"td",25),t.YNc(1,On,7,6,"div",26),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngIf",n.id)}}function qn(e,a){1&e&&(t.TgZ(0,"th",24),t._uU(1," Source Type"),t.qZA())}function Yn(e,a){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.sourceType," ")}}function In(e,a){1&e&&(t.TgZ(0,"th",24),t._uU(1," Source "),t.qZA())}function Mn(e,a){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.source," ")}}function kn(e,a){1&e&&(t.TgZ(0,"th",24),t._uU(1," Source ID"),t.qZA())}function Qn(e,a){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.sourceId," ")}}function Jn(e,a){1&e&&(t.TgZ(0,"th",24),t._uU(1," Type "),t.qZA())}function Rn(e,a){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.type," ")}}function Ln(e,a){1&e&&(t.TgZ(0,"th",24),t._uU(1," Spec Type "),t.qZA())}function Fn(e,a){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.specType," ")}}function $n(e,a){1&e&&(t.TgZ(0,"th",33),t._uU(1," Parent Substance "),t.qZA())}var zn=function(a){return["/substances",a]};function Bn(e,a){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",27),t.TgZ(2,"span",35),t._uU(3),t.qZA(),t.qZA(),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,zn,n._parentSubstanceUuid)),t.xp6(2),t.Oqu(n._parentSubstanceName)}}function jn(e,a){if(1&e&&(t.TgZ(0,"td",25),t.YNc(1,Bn,4,4,"div",34),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.impuritiesSubstanceList)}}function Hn(e,a){1&e&&(t.TgZ(0,"th",33),t._uU(1," Impurities Related Substance"),t.qZA())}function Gn(e,a){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var n=t.oxw(2).$implicit;t.xp6(1),t.hij("\xa0\xa0\xa0\xa0",n.limitType,"\xa0")}}function Wn(e,a){if(1&e&&(t.TgZ(0,"span",40),t._UZ(1,"br"),t._uU(2),t.qZA()),2&e){var n=t.oxw(2).$implicit;t.xp6(2),t.hij("\xa0\xa0\xa0\xa0",n.impurityType," ")}}function Kn(e,a){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"span",38),t.YNc(2,Gn,2,1,"span",26),t._uU(3),t.qZA(),t.YNc(4,Wn,3,1,"span",39),t.qZA()),2&e){var n=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",n.limitType),t.xp6(1),t.AsE(" ",n.limitValue,"\xa0",n.unit," "),t.xp6(1),t.Q6J("ngIf",n.impurityType)}}function Xn(e,a){if(1&e&&(t.TgZ(0,"div",37),t.YNc(1,Kn,5,4,"div",26),t.qZA()),2&e){var n=a.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",n.relatedSubstanceUuid===o.substanceUuid)}}function Vn(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Xn,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.impuritiesDetailsList)}}function ta(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Vn,2,1,"div",34),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.impuritiesTestList)}}function ea(e,a){if(1&e&&(t.TgZ(0,"td",25),t.YNc(1,ta,2,1,"div",34),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.impuritiesSubstanceList)}}function na(e,a){1&e&&t._UZ(0,"tr",41)}function aa(e,a){1&e&&t._UZ(0,"tr",42)}var ia=function(){return[5,10,25,100]},oa=function(){var e=function(a){function n(o,i,s,c,l,d,u){var r;return(0,x.Z)(this,n),r=function Tn(e,a,n){return a=(0,f.Z)(a),(0,T.Z)(e,(0,A.Z)()?Reflect.construct(a,n||[],(0,f.Z)(e).constructor):a.apply(e,n))}(this,n,[i,s]),r.router=o,r.gaService=i,r.impuritiesService=s,r.generalService=c,r.authService=l,r.loadingService=d,r.dialog=u,r.countImpuritiesOut=new t.vpe,r.subscriptions=[],r.showSpinner=!1,r.totalImpurities=0,r.impuritiesCount=0,r.impuritiesTestTotal=0,r.pageIndex=0,r.pageSize=5,r.privateExport=!1,r.disableExport=!1,r.etag="",r.sortValues=xn,r.order="$root_productSubstanceName",r.ascDescDir="desc",r.displayedColumns=["productSubstanceName","sourceType","source","sourceId","type","specType","parentSubstance","relatedSubstance"],r}return(0,Z.Z)(n,a),(0,S.Z)(n,[{key:"ngOnInit",value:function(){var i=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(c){i.isAdmin=c});this.subscriptions.push(s),this.substanceUuid&&(this.getImpuritiesBySubstanceUuid(),this.impuritiesListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i&&i.unsubscribe()})}},{key:"searchImpurities",value:function(){var i=this;this.privateSearchTerm=this.substanceUuid;var c=this.impuritiesService.searchImpurities(this.pageIndex*this.pageSize,this.pageSize,this.privateSearchTerm,this.privateFacetParams).subscribe(function(l){i.setResultData(l.content),i.impurities=l.content,i.impuritiesCount=l.total,i.countImpuritiesOut.emit(i.impuritiesCount),i.etag=l.etag},function(l){},function(){c.unsubscribe()})}},{key:"getImpuritiesBySubstanceUuid",value:function(i){var s=this;this.showSpinner=!0,this.setPageEvent(i),this.impuritiesService.getImpuritiesBySubstanceUuid(this.order,this.page*this.pageSize,this.pageSize,this.substanceUuid,this.privateFacetParams).subscribe(function(l){s.impuritiesService.totalRecords=l.total,s.impurities=l.content,s.loadImpuritiesTestDetails(),s.setResultData(s.impurities),s.totalImpurities=l.total,s.etag=l.etag,s.countImpuritiesOut.emit(s.totalImpurities)}),this.showSpinner=!1}},{key:"loadImpuritiesTestDetails",value:function(){var i=this;this.impurities.forEach(function(s,c){s.impuritiesSubstanceList.forEach(function(l,d){l.substanceUuid&&l.substanceUuid===i.substanceUuid&&(l._parentSubstanceName=i.substanceName,l._parentSubstanceUuid=l.substanceUuid),l.impuritiesTestList.forEach(function(u,r){u.impuritiesDetailsList.forEach(function(v,_){if(null!=v.relatedSubstanceUuid&&v.relatedSubstanceUuid===i.substanceUuid){var C=i.generalService.getSubstanceNamesBySubstanceUuid(l.substanceUuid).subscribe(function(Y){Y.forEach(function(B,Oi){!0===B.displayName&&(l._parentSubstanceName=B.name,l._parentSubstanceUuid=l.substanceUuid)})});i.subscriptions.push(C)}})})})})}},{key:"getSubstanceNames",value:function(i){var s;if(i){var c=this.generalService.getSubstanceNamesBySubstanceUuid(i).subscribe(function(l){l.forEach(function(u,r){!0===u.displayName&&(s=u.name)})});return this.subscriptions.push(c),s}}},{key:"export",value:function(){var i=this;if(this.etag){var s="xlsx",c=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(I.L,{width:"700px",data:{extension:s,type:"substanceImpurities",entity:"impurities",hideOptionButtons:!0}}).afterClosed().subscribe(function(d){var u=d.name,r=d.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(c,i.privateExport,u+"."+s,r).subscribe(function(_){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",_.id])},function(_){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.impuritiesService.getApiExportUrl(i,s)}},{key:"impuritiesListExportUrl",value:function(){null!=this.substanceUuid&&(this.exportUrl=this.impuritiesService.getImpuritiesListExportUrl(this.substanceUuid))}},{key:"sortData",value:function(i){var s=this;if(i.active){var c=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&s.displayedColumns[c]===l.displayedColumns&&s.ascDescDir===l.direction&&(s.order=l.value)}),this.getImpuritiesBySubstanceUuid()}}}]),n}(U);return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.F0),t.Y36(D.$),t.Y36(Sn.q),t.Y36(J.m),t.Y36(N.e),t.Y36(P.b),t.Y36(O.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-impurities"]],inputs:{substanceUuid:"substanceUuid",substanceName:"substanceName"},outputs:{countImpuritiesOut:"countImpuritiesOut"},features:[t.qOj],decls:35,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",3,"dataSource","matSortChange"],["matColumnDef","productSubstanceName"],["mat-header-cell","","mat-sort-header","","class","width100px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sourceType"],["matColumnDef","source"],["matColumnDef","sourceId"],["matColumnDef","type"],["matColumnDef","specType"],["matColumnDef","parentSubstance"],["mat-header-cell","","class","width100px",4,"matHeaderCellDef"],["matColumnDef","relatedSubstance"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header","",1,"width100px"],["mat-cell",""],[4,"ngIf"],["target","_blank",3,"routerLink"],[4,"ngIf","ngIfElse"],["noProdName",""],["target","_blank","matTooltip","Edit Impurities Record",3,"routerLink",4,"ngIf"],["target","_blank","matTooltip","Edit Impurities Record",3,"routerLink"],["svgIcon","edit"],["mat-header-cell","",1,"width100px"],[4,"ngFor","ngForOf"],[1,"colorblue"],["class","font12px",4,"ngFor","ngForOf"],[1,"font12px"],[1,"colorgreen"],["class","colorpurple",4,"ngIf"],[1,"colorpurple"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Impurities Specs"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,An,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,Zn,2,0,"div",3),t.TgZ(7,"table",4),t.NdJ("matSortChange",function(s){return o.sortData(s)}),t.ynx(8,5),t.YNc(9,yn,2,0,"th",6),t.YNc(10,wn,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,qn,2,0,"th",6),t.YNc(13,Yn,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,In,2,0,"th",6),t.YNc(16,Mn,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,kn,2,0,"th",6),t.YNc(19,Qn,2,1,"td",7),t.BQk(),t.ynx(20,11),t.YNc(21,Jn,2,0,"th",6),t.YNc(22,Rn,2,1,"td",7),t.BQk(),t.ynx(23,12),t.YNc(24,Ln,2,0,"th",6),t.YNc(25,Fn,2,1,"td",7),t.BQk(),t.ynx(26,13),t.YNc(27,$n,2,0,"th",14),t.YNc(28,jn,2,1,"td",7),t.BQk(),t.ynx(29,15),t.YNc(30,Hn,2,0,"th",14),t.YNc(31,ea,2,1,"td",7),t.BQk(),t.YNc(32,na,1,0,"tr",16),t.YNc(33,aa,1,0,"tr",17),t.qZA(),t.qZA(),t.TgZ(34,"mat-paginator",18),t.NdJ("page",function(s){return o.getImpuritiesBySubstanceUuid(s)}),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin&&o.totalRecords>0),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,ia)))},directives:[g.O5,w.lW,q.Hw,y.Ou,p.BZ,b.YE,p.w1,p.fO,p.ge,b.nU,p.Dz,p.ev,h.yS,g.sg,p.as,p.XQ,p.nj,p.Gk,E.NW],styles:['@charset "UTF-8";.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.bordergray[_ngcontent-%COMP%]{border:1px solid var(--regular-grey-color)}.font10px[_ngcontent-%COMP%]{font-size:10px}.font12px[_ngcontent-%COMP%]{font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.colorgreen[_ngcontent-%COMP%]{color:var(--regular-green-color)}.colorpurple[_ngcontent-%COMP%]{color:var(--regular-purple-color)}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.marginbottom10px[_ngcontent-%COMP%]{margin-bottom:10px}.width100px[_ngcontent-%COMP%]{width:100px}ol[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{margin-left:0;padding-left:0}\\200b[_ngcontent-%COMP%]   .spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}']}),e}(),sa=m(53956);function ca(e,a){1&e&&(t.TgZ(0,"div",11),t._UZ(1,"mat-progress-spinner",12),t.qZA())}function ua(e,a){1&e&&(t.TgZ(0,"th",13),t._uU(1,"View/Edit "),t.qZA())}var la=function(a){return["/substances-ssg4m",a,"edit"]};function pa(e,a){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",18),t._uU(2," View/Edit "),t.qZA(),t.qZA()),2&e){var n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,la,n.synthPathwaySkey))}}function da(e,a){1&e&&t._uU(0," Please Login to View/Edit ")}function ma(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,pa,3,3,"div",16),t.YNc(2,da,1,0,"ng-template",null,17,t.W1O),t.qZA()),2&e){var n=t.MAs(3),o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",o.isAdmin)("ngIfElse",n)}}function _a(e,a){if(1&e&&(t.TgZ(0,"td",14),t.YNc(1,ma,4,2,"div",15),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngIf",n.synthPathwaySkey)}}function va(e,a){1&e&&(t.TgZ(0,"th",13),t._uU(1," Substance Reaction/Role"),t.qZA())}function fa(e,a){1&e&&(t.TgZ(0,"span"),t._UZ(1,"br"),t.qZA())}function ga(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,fa,2,0,"span",15),t.TgZ(2,"span",20),t._uU(3),t.qZA(),t._UZ(4,"br"),t._uU(5),t.qZA()),2&e){var n=a.$implicit,o=a.index;t.xp6(1),t.Q6J("ngIf",o>0),t.xp6(2),t.hij(" ",n.sbstncReactnSectNm," "),t.xp6(2),t.hij(" ",n.sbstncRoleNm," ")}}function ba(e,a){if(1&e&&(t.TgZ(0,"td",14),t.YNc(1,ga,6,3,"div",19),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.synthDetails)}}function ha(e,a){1&e&&t._UZ(0,"tr",21)}function Ca(e,a){1&e&&t._UZ(0,"tr",22)}var Sa=function(){return[5,10,25,100]},xa=function(){var e=function(a){function n(o,i,s,c,l,d,u){var r;return(0,x.Z)(this,n),r=function ra(e,a,n){return a=(0,f.Z)(a),(0,T.Z)(e,(0,A.Z)()?Reflect.construct(a,n||[],(0,f.Z)(e).constructor):a.apply(e,n))}(this,n,[i,s]),r.router=o,r.gaService=i,r.ssg4mService=s,r.generalService=c,r.authService=l,r.loadingService=d,r.dialog=u,r.countSsg4mOut=new t.vpe,r.subscriptions=[],r.ssg4mTotalRecords=0,r.showSpinner=!1,r.pageIndex=0,r.pageSize=5,r.privateExport=!1,r.disableExport=!1,r.etag="",r.ascDescDir="desc",r.displayedColumns=["view","substanceReaction"],r}return(0,Z.Z)(n,a),(0,S.Z)(n,[{key:"ngOnInit",value:function(){var i=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(c){i.isAdmin=c});this.subscriptions.push(s),this.substanceUuid&&this.getSsg4mBySubstanceUuid()}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i&&i.unsubscribe()})}},{key:"getSsg4mBySubstanceUuid",value:function(i){var s=this;this.showSpinner=!0,this.setPageEvent(i);var l=this.ssg4mService.getSyntheticPathwayIndexBySubUuid(this.substanceUuid).subscribe(function(d){var u=[];d.length>0&&d.forEach(function(r){if(r.synthPathwaySkey){var v=!1;if(u.forEach(function(C){C.synthPathwaySkey===r.synthPathwaySkey&&(C.synthDetails.push({sbstncReactnSectNm:r.sbstncReactnSectNm,sbstncRoleNm:r.sbstncRoleNm}),v=!0)}),!1===v){var _={synthDetails:[]};_.synthPathwaySkey=r.synthPathwaySkey,_.synthDetails.push({sbstncReactnSectNm:r.sbstncReactnSectNm,sbstncRoleNm:r.sbstncRoleNm}),u.push(_)}}}),s.ssg4mTotalRecords=u.length,s.paged=u,s.countSsg4mOut.emit(u.length)},function(d){s.showSpinner=!1,console.log("error")},function(){s.showSpinner=!1,l.unsubscribe()})}}]),n}(U);return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.F0),t.Y36(D.$),t.Y36(sa.$),t.Y36(J.m),t.Y36(N.e),t.Y36(P.b),t.Y36(O.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-ssg4m"]],inputs:{substanceUuid:"substanceUuid",substanceName:"substanceName"},outputs:{countSsg4mOut:"countSsg4mOut"},features:[t.qOj],decls:16,vars:8,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","view"],["mat-header-cell","","class","width100px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","substanceReaction"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","",1,"width100px"],["mat-cell",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noLogin",""],["target","_blank","matTooltip","View/Edit Specified Substance Group 4 Manufacturing Record",3,"routerLink"],[4,"ngFor","ngForOf"],[1,"colorgreen"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"SSG4 Manufacturing"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.qZA(),t.TgZ(4,"div",1),t.YNc(5,ca,2,0,"div",2),t.TgZ(6,"table",3),t.ynx(7,4),t.YNc(8,ua,2,0,"th",5),t.YNc(9,_a,2,1,"td",6),t.BQk(),t.ynx(10,7),t.YNc(11,va,2,0,"th",5),t.YNc(12,ba,2,1,"td",6),t.BQk(),t.YNc(13,ha,1,0,"tr",8),t.YNc(14,Ca,1,0,"tr",9),t.qZA(),t.qZA(),t.TgZ(15,"mat-paginator",10),t.NdJ("page",function(s){return o.getSsg4mBySubstanceUuid(s)}),t.qZA()),2&n&&(t.xp6(5),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(7),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.ssg4mTotalRecords)("pageSize",5)("pageSizeOptions",t.DdM(7,Sa)))},directives:[g.O5,y.Ou,p.BZ,p.w1,p.fO,p.ge,p.Dz,p.ev,h.yS,g.sg,p.as,p.XQ,p.nj,p.Gk,E.NW],styles:['@charset "UTF-8";.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.bordergray[_ngcontent-%COMP%]{border:1px solid var(--regular-grey-color)}.font10px[_ngcontent-%COMP%]{font-size:10px}.font12px[_ngcontent-%COMP%]{font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.colorgreen[_ngcontent-%COMP%]{color:var(--regular-green-color)}.colorpurple[_ngcontent-%COMP%]{color:var(--regular-purple-color)}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.marginbottom10px[_ngcontent-%COMP%]{margin-bottom:10px}.width100px[_ngcontent-%COMP%]{width:100px}ol[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{margin-left:0;padding-left:0}\\200b[_ngcontent-%COMP%]   .spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}']}),e}();function Aa(e,a){if(1&e&&t._UZ(0,"a",5),2&e){var n=t.oxw();t.Q6J("href",n.baseDomain+"/ginas/app/substance/"+n.substance.uuid+"#fdadetails",t.LSH)}}function Za(e,a){1&e&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"div",9),t.TgZ(3,"b"),t._uU(4,"No Product Found"),t.qZA(),t.qZA(),t._UZ(5,"br"),t.qZA())}function ya(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"span",29),t.TgZ(1,"button",30),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).export()}),t._UZ(2,"mat-icon",31),t._uU(3," Export All Products "),t.qZA(),t.qZA()}}function Ea(e,a){1&e&&(t.TgZ(0,"div",32),t._UZ(1,"mat-progress-spinner",33),t.qZA())}function Da(e,a){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product ID "),t.qZA())}function Ua(e,a){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.productCode," ")}}function Na(e,a){1&e&&t._uU(0,"(NO ID)")}var Pa=function(a){return["/product",a]};function Oa(e,a){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",38),t.YNc(2,Ua,2,1,"span",39),t.YNc(3,Na,1,0,"ng-template",null,40,t.W1O),t.qZA(),t.qZA()),2&e){var n=a.$implicit,o=t.MAs(4),i=t.oxw(2).$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(3,Pa,i.id)),t.xp6(1),t.Q6J("ngIf",n.productCode)("ngIfElse",o)}}function wa(e,a){if(1&e&&(t.TgZ(0,"span"),t.YNc(1,Oa,5,5,"span",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productCodes)}}var qa=function(a){return["/product",a,"edit"]};function Ya(e,a){if(1&e&&(t.TgZ(0,"a",41),t._UZ(1,"mat-icon",42),t.qZA()),2&e){var n=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,qa,n.id))}}function Ia(e,a){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,wa,2,1,"span",36),t._uU(2," \xa0\xa0 "),t.YNc(3,Ya,2,3,"a",37),t.qZA()),2&e){var n=a.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",n.productProvenances),t.xp6(2),t.Q6J("ngIf",o.isAdmin)}}function Ma(e,a){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product Name "),t.qZA())}function ka(e,a){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.productName," ")}}function Qa(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,ka,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productNames)}}function Ja(e,a){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,Qa,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productProvenances)}}function Ra(e,a){1&e&&(t.TgZ(0,"th",34),t._uU(1," Labeler Name "),t.qZA())}function La(e,a){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.companyName," ")}}function Fa(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,La,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productCompanies)}}function $a(e,a){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.YNc(2,Fa,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.labelerName," "),t.xp6(1),t.Q6J("ngForOf",n.productProvenances)}}function za(e,a){1&e&&(t.TgZ(0,"th",34),t._uU(1," Country "),t.qZA())}function Ba(e,a){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.companyCountry," ")}}function ja(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Ba,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productCompanies)}}function Ha(e,a){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,ja,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productProvenances)}}function Ga(e,a){1&e&&(t.TgZ(0,"th",34),t._uU(1," Status "),t.qZA())}function Wa(e,a){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.productStatus," ")}}function Ka(e,a){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,Wa,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productProvenances)}}function Xa(e,a){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product Type "),t.qZA())}function Va(e,a){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.hij(" ",n.productType," ")}}function ti(e,a){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,Va,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productProvenances)}}function ei(e,a){1&e&&(t.TgZ(0,"th",34),t._uU(1," Ingredient Type "),t.qZA())}function ni(e,a){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var n=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",n.ingredientType," ")}}function ai(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,ni,2,1,"div",4),t.qZA()),2&e){var n=t.oxw().$implicit,o=t.oxw(6);t.xp6(1),t.Q6J("ngIf",o.bdnum===n.substanceKey)}}function ii(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,ai,2,1,"div",4),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngIf",n.substanceKey)}}function oi(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,ii,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productIngredients)}}function si(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,oi,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productLots)}}function ri(e,a){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,si,2,1,"div",36),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productManufactureItems)}}function ci(e,a){1&e&&(t.TgZ(0,"th",34),t._uU(1," Application Number "),t.qZA())}function ui(e,a){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.AsE(" ",n.applicationType,"\xa0",n.applicationNumber," ")}}function li(e,a){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,ui,2,2,"div",36),t._uU(2),t.qZA()),2&e){var n=a.$implicit;t.xp6(1),t.Q6J("ngForOf",n.productProvenances),t.xp6(1),t.hij(" ",n.appTypeNumber," ")}}function pi(e,a){1&e&&t._UZ(0,"tr",43)}function di(e,a){1&e&&t._UZ(0,"tr",44)}var mi=function(){return[5,10,25,100]};function _i(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"div",10),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.TgZ(5,"span",11),t._uU(6),t.qZA(),t._uU(7," \xa0\xa0\xa0 "),t.YNc(8,ya,4,0,"span",12),t.qZA(),t.TgZ(9,"div",13),t.YNc(10,Ea,2,0,"div",14),t.TgZ(11,"table",15),t.NdJ("matSortChange",function(c){return t.CHM(n),t.oxw(2).sortData(c)}),t.ynx(12,16),t.YNc(13,Da,2,0,"th",17),t.YNc(14,Ia,4,2,"td",18),t.BQk(),t.ynx(15,19),t.YNc(16,Ma,2,0,"th",17),t.YNc(17,Ja,2,1,"td",18),t.BQk(),t.ynx(18,20),t.YNc(19,Ra,2,0,"th",17),t.YNc(20,$a,3,2,"td",18),t.BQk(),t.ynx(21,21),t.YNc(22,za,2,0,"th",17),t.YNc(23,Ha,2,1,"td",18),t.BQk(),t.ynx(24,22),t.YNc(25,Ga,2,0,"th",17),t.YNc(26,Ka,2,1,"td",18),t.BQk(),t.ynx(27,23),t.YNc(28,Xa,2,0,"th",17),t.YNc(29,ti,2,1,"td",18),t.BQk(),t.ynx(30,24),t.YNc(31,ei,2,0,"th",17),t.YNc(32,ri,2,1,"td",18),t.BQk(),t.ynx(33,25),t.YNc(34,ci,2,0,"th",17),t.YNc(35,li,3,2,"td",18),t.BQk(),t.YNc(36,pi,1,0,"tr",26),t.YNc(37,di,1,0,"tr",27),t.qZA(),t.qZA(),t.TgZ(38,"mat-paginator",28),t.NdJ("page",function(c){return t.CHM(n),t.oxw(2).getSubstanceProducts(c)}),t.qZA(),t.qZA()}if(2&e){var o=a.$implicit,i=t.oxw(2);t.s9C("label",o),t.xp6(3),t.hij(" ",o,""),t.xp6(3),t.Oqu(i.loadingStatus),t.xp6(2),t.Q6J("ngIf",i.isAdmin&&i.totalRecords>0),t.xp6(2),t.Q6J("ngIf",i.showSpinner),t.xp6(1),t.Q6J("dataSource",i.paged),t.xp6(25),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(11,mi))}}function vi(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"mat-tab",6),t.YNc(1,Za,6,0,"div",4),t.TgZ(2,"mat-tab-group",7),t.NdJ("selectedTabChange",function(s){return t.CHM(n),t.oxw().tabSelected(s)}),t.YNc(3,_i,39,12,"mat-tab",8),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Product (",o.productCount,")"),t.xp6(1),t.Q6J("ngIf",!0===o.loadingComplete&&!1===o.foundProvenanceList&&0===o.productCount),t.xp6(2),t.Q6J("ngForOf",o.provenanceList)}}function fi(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-application",45),t.NdJ("countApplicationOut",function(s){return t.CHM(n),t.oxw().getApplicationCount(s)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Application (",o.applicationCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function gi(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-tab",6),t.TgZ(2,"app-substance-clinical-trials",46),t.NdJ("countClinicalTrialOut",function(s){return t.CHM(n),t.oxw().getClinicalTrialCount(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.xp6(1),t.MGl("label","Clinical Trial (",o.clinicalTrialCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)("substanceUuid",o.substance.uuid)}}function bi(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-clinical-trials-eu",47),t.NdJ("countClinicalTrialEuOut",function(s){return t.CHM(n),t.oxw().getClinicalTrialEuCount(s)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Clinical Trial Europe (",o.clinicalTrialEuCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)("substanceUuid",o.substance.uuid)}}function hi(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventpt",48),t.NdJ("countAdvPtOut",function(s){return t.CHM(n),t.oxw().getAdvPtCount(s)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event PT (",o.advPtCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)("substanceName",o.substanceName)}}function Ci(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventdme",49),t.NdJ("countAdvDmeOut",function(s){return t.CHM(n),t.oxw().getAdvDmeCount(s)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event DME (",o.advDmeCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function Si(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventcvm",50),t.NdJ("countAdvCvmOut",function(s){return t.CHM(n),t.oxw().getAdvCvmCount(s)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event CVM (",o.advCvmCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function xi(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-impurities",51),t.NdJ("countImpuritiesOut",function(s){return t.CHM(n),t.oxw().getImpuritiesCount(s)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Impurities Specs (",o.impuritiesCount,")"),t.xp6(1),t.Q6J("substanceUuid",o.substance.uuid)("substanceName",o.substanceName)}}function Ti(e,a){if(1&e){var n=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-ssg4m",52),t.NdJ("countSsg4mOut",function(s){return t.CHM(n),t.oxw().getSsg4mCount(s)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","SSG4 Manufacturing (",o.ssg4mCount,")"),t.xp6(1),t.Q6J("substanceUuid",o.substance.uuid)("substanceName",o.substanceName)}}var Ai=function(){var e=function(a){function n(o,i,s,c,l,d,u){var r;return(0,x.Z)(this,n),r=function Ta(e,a,n){return a=(0,f.Z)(a),(0,T.Z)(e,(0,A.Z)()?Reflect.construct(a,n||[],(0,f.Z)(e).constructor):a.apply(e,n))}(this,n,[i,s]),r.router=o,r.gaService=i,r.productService=s,r.configService=c,r.authService=l,r.loadingService=d,r.dialog=u,r.productCount=0,r.applicationCount=0,r.clinicalTrialCount=0,r.clinicalTrialEuCount=0,r.advPtCount=0,r.advDmeCount=0,r.advCvmCount=0,r.impuritiesCount=0,r.ssg4mCount=0,r.provenance="",r.provenanceList="",r.datasourceList="",r.loadingStatus="",r.showSpinner=!1,r.foundProvenanceList=!1,r.loadingComplete=!1,r.substanceName="",r.privateSearchBase="root_productManufactureItems_productLots_productIngredients_substanceKey:",r.sortValues=K.R,r.order="$root_productNDC",r.ascDescDir="desc",r.privateExport=!1,r.disableExport=!1,r.etag="",r.etagAllExport="",r.displayedColumns=["productNDC","productName","labelerName","country","status","productType","ingredientType","applicationNumber"],r}return(0,Z.Z)(n,a),(0,S.Z)(n,[{key:"ngOnInit",value:function(){var i=this;this.loadedComponents=this.configService.configData.loadedComponents||null,this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,Q.q)(1)).subscribe(function(s){i.isAdmin=s}),this.substance&&this.substance.uuid&&(this.getSubstanceKey(),this.getProductProvenanceList(),this.privateSearch=this.privateSearchBase+'"'+this.bdnum+'"',this.getSubstanceProducts(null,"initial")),this.baseDomain=this.configService.configData.apiUrlDomain}},{key:"ngAfterViewInit",value:function(){}},{key:"getApplicationCount",value:function(i){this.applicationCount=i}},{key:"getClinicalTrialCount",value:function(i){this.clinicalTrialCount=i}},{key:"getClinicalTrialEuCount",value:function(i){this.clinicalTrialEuCount=i}},{key:"getAdvPtCount",value:function(i){this.advPtCount=i}},{key:"getAdvDmeCount",value:function(i){this.advDmeCount=i}},{key:"getAdvCvmCount",value:function(i){this.advCvmCount=i}},{key:"getImpuritiesCount",value:function(i){this.impuritiesCount=i}},{key:"getSsg4mCount",value:function(i){this.ssg4mCount=i}},{key:"getSubstanceKey",value:function(){var i=this;this.substance&&(this.substanceName=this.substance._name,this.substance.codes.length>0&&this.substance.codes.forEach(function(s){s.codeSystem&&"BDNUM"===s.codeSystem&&s.type&&"PRIMARY"===s.type&&(i.bdnum=s.code)}))}},{key:"getProductProvenanceList",value:function(){var i=this;this.productService.getProductProvenanceList(this.bdnum).subscribe(function(s){i.provenanceList=s,i.provenanceList&&i.provenanceList.length>0&&(i.foundProvenanceList=!0),i.loadingComplete=!0})}},{key:"getSubstanceProducts",value:function(i,s){var c=this;this.setPageEvent(i),this.showSpinner=!0;var d=this.productService.getProducts(this.order,this.page*this.pageSize,this.pageSize,this.privateSearch,this.privateFacetParams).subscribe(function(u){s&&"initial"===s?c.etagAllExport=u.etag:(c.productService.totalRecords=u.total,c.setResultData(u.content),c.productCount=u.total,c.etag=u.etag)},function(u){c.showSpinner=!1,console.log("error")},function(){c.showSpinner=!1,d.unsubscribe()});this.loadingStatus=""}},{key:"export",value:function(){var i=this;if(this.etagAllExport){var s="xlsx",c=this.getApiExportUrl(this.etagAllExport,s);""!==this.authService.getUser()&&this.dialog.open(I.L,{width:"700px",data:{extension:s,type:"substanceProduct",entity:"products",hideOptionButtons:!0}}).afterClosed().subscribe(function(d){var u=d.name,r=d.id;u&&""!==u&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(c,i.privateExport,u+"."+s,r).subscribe(function(_){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",_.id])},function(_){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.productService.getApiExportUrl(i,s)}},{key:"tabSelected",value:function(i){if(i){var c=i.tab.textLabel;null!=c&&(this.loadingStatus="Loading data...",this.provenance=c,this.paged=[],this.privateSearch=this.privateSearchBase+'"'+this.bdnum+'" AND root_productProvenances_provenance:'+this.provenance,this.getSubstanceProducts())}}},{key:"sortData",value:function(i){var s=this;if(i.active){var c=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(l){l.displayedColumns&&l.direction&&s.displayedColumns[c]===l.displayedColumns&&s.ascDescDir===l.direction&&(s.order=l.value)}),this.getSubstanceProducts()}}}]),n}(U);return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.F0),t.Y36(D.$),t.Y36(H.M),t.Y36(k.E),t.Y36(N.e),t.Y36(P.b),t.Y36(O.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-products"]],features:[t.qOj],decls:13,vars:10,consts:[[1,"info-container"],["aria-label","FDA details","target","_blank",3,"href",4,"ngIf"],[1,"bordergray","mat-tab-style"],[3,"label",4,"ngIf"],[4,"ngIf"],["aria-label","FDA details","target","_blank",3,"href"],[3,"label"],[3,"selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[1,"padleft25px","colorblue"],[1,"divflex","padtop5px","padleft25px","font15px","colorblue"],[1,"colorred"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","","matSortActive","productNDC","matSortDirection","desc","matSortDisableClear","",1,"font12px",3,"dataSource","matSortChange"],["matColumnDef","productNDC"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","productName"],["matColumnDef","labelerName"],["matColumnDef","country"],["matColumnDef","status"],["matColumnDef","productType"],["matColumnDef","ingredientType"],["matColumnDef","applicationNumber"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngFor","ngForOf"],["target","_blank","matTooltip","Edit GSRS Product Record",3,"routerLink",4,"ngIf"],["target","_blank",1,"substance-name",3,"routerLink"],[4,"ngIf","ngIfElse"],["noProdCode",""],["target","_blank","matTooltip","Edit GSRS Product Record",3,"routerLink"],["svgIcon","edit"],["mat-header-row",""],["mat-row",""],[3,"bdnum","countApplicationOut"],[3,"bdnum","substanceUuid","countClinicalTrialOut"],[3,"bdnum","substanceUuid","countClinicalTrialEuOut"],[3,"bdnum","substanceName","countAdvPtOut"],[3,"bdnum","countAdvDmeOut"],[3,"bdnum","countAdvCvmOut"],[3,"substanceUuid","substanceName","countImpuritiesOut"],[3,"substanceUuid","substanceName","countSsg4mOut"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Aa,1,1,"a",1),t.qZA(),t.TgZ(2,"div",2),t.TgZ(3,"mat-tab-group"),t.YNc(4,vi,4,3,"mat-tab",3),t.YNc(5,fi,2,2,"mat-tab",3),t.YNc(6,gi,3,3,"div",4),t.YNc(7,bi,2,3,"mat-tab",3),t.YNc(8,hi,2,3,"mat-tab",3),t.YNc(9,Ci,2,2,"mat-tab",3),t.YNc(10,Si,2,2,"mat-tab",3),t.YNc(11,xi,2,3,"mat-tab",3),t.YNc(12,Ti,2,3,"mat-tab",3),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",o.substance&&o.substance.uuid),t.xp6(3),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.products),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.applications),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.clinicaltrials),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.clinicaltrials),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.impurities),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.ssg4m))},directives:[g.O5,M.SP,M.uX,g.sg,w.lW,q.Hw,y.Ou,p.BZ,b.YE,p.w1,p.fO,p.ge,b.nU,p.Dz,p.ev,h.yS,p.as,p.XQ,p.nj,p.Gk,E.NW,Dt,Gt,_e,Me,an,Cn,oa,xa],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.mat-tab-style[_ngcontent-%COMP%]   .mat-tab-labels[_ngcontent-%COMP%], .mat-tab-style[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-style[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:var(--regular-blue-color)}.bordergray[_ngcontent-%COMP%]{border:1px solid var(--regular-grey-color)}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:var(--regular-grey-color)}.padleft15px[_ngcontent-%COMP%]{padding-left:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:var(--deep-purple-color)}.colorred[_ngcontent-%COMP%]{color:var(--regular-red-color)}.info-container[_ngcontent-%COMP%]{margin-bottom:15px}.info-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--deep-blue-color-rgb-2);text-decoration:none}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:var(--spinner-bg-color);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}.divflex[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.middle-fill[_ngcontent-%COMP%]{-ms-flex:1 1 auto;flex:1 1 auto}"]}),e}(),Zi=m(33865),yi=m(43365),z=m(90587),Ei=(m(64061),function(){var e=(0,S.Z)(function a(){(0,x.Z)(this,a)});return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,j.o0.forChild(Ai),p.p0,Zi.HT,E.TU,b.JX,yi.c,M.Nh,w.ot,q.Ps,y.Cq,z.UX,z.u5,h.Bz]]}),e}())}}]);
//# sourceMappingURL=764.67fa07e8999e39ee.js.map