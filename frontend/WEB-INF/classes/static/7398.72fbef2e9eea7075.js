"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[7398],{87398:function(_,f,a){a.r(f),a.d(f,{SubstanceSubunitsModule:function(){return Q}});var m=a(48047),h=a(78069),d=a(36362),Z=a(10853),O=a(98568),S=a(20265),M=a(24582),T=a(2756),q=a(42827),A=a(24874),P=a(50253),n=a(76442),p=a(31959),C=a(65590),x=a(98002),y=a(40089);function I(s,u){if(1&s&&(n.TgZ(0,"span",22),n._uU(1),n.qZA()),2&s){var i=u.$implicit,o=n.oxw(3).$implicit,t=n.oxw();n.Q6J("ngClass",i.class?"error":"")("matTooltip",t.getTooltipMessage(o.subunitIndex,i.unitIndex,i.unitValue)),n.xp6(1),n.hij(" ",i.unitValue," ")}}function U(s,u){if(1&s&&(n.TgZ(0,"div",18),n.TgZ(1,"div",19),n._uU(2),n.qZA(),n.TgZ(3,"div",20),n.YNc(4,I,2,3,"span",21),n.qZA(),n.qZA()),2&s){var i=u.$implicit,o=u.last,t=n.oxw().last;n.Q6J("ngClass",t&&o?"last-section":""),n.xp6(2),n.Oqu(i.sectionNumber),n.xp6(2),n.Q6J("ngForOf",i.sectionUnits)}}function F(s,u){if(1&s&&(n.TgZ(0,"div",16),n.YNc(1,U,5,3,"div",17),n.qZA()),2&s){var i=u.$implicit;n.xp6(1),n.Q6J("ngForOf",i.sequenceSections)}}var N=function(){return["/sequence-search"]},V=function(u,i,o){return{substance:u,subunit:i,seq_type:o}};function E(s,u){if(1&s&&(n.TgZ(0,"div",9),n.TgZ(1,"div",10),n.TgZ(2,"div",11),n._uU(3),n.qZA(),n.TgZ(4,"div"),n.TgZ(5,"a",12),n._uU(6,"similarity search "),n._UZ(7,"mat-icon",13),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"div",9),n.TgZ(9,"div",14),n.YNc(10,F,2,1,"div",15),n.qZA(),n.qZA(),n.qZA()),2&s){var i=u.$implicit,o=n.oxw();n.xp6(3),n.hij(" Subunit ",i.subunitIndex,""),n.xp6(2),n.Q6J("routerLink",n.DdM(4,N))("queryParams",n.kEZ(5,V,o.uuid,i.uuid,o.substanceType)),n.xp6(5),n.Q6J("ngForOf",i.sequencesSectionGroups)}}function J(s,u){if(1&s&&(n.TgZ(0,"div",23),n.TgZ(1,"h4"),n._uU(2),n.qZA(),n.TgZ(3,"div",24),n._uU(4),n.qZA(),n.qZA()),2&s){var i=u.$implicit;n.xp6(2),n.hij("Subunit ",i.subunitIndex,""),n.xp6(2),n.Oqu(i.sequence)}}var k=function(){var s=function(u){function i(o,t){var e;return(0,h.Z)(this,i),e=function w(s,u,i){return u=(0,S.Z)(u),(0,Z.Z)(s,(0,O.Z)()?Reflect.construct(u,i||[],(0,S.Z)(s).constructor):u.apply(s,i))}(this,i),e.cvService=o,e.gaService=t,e.subunits=[],e.subunitSequences=[],e.vocabulary={},e.view="details",e.substanceUpdated=new P.x,e.cvType="AMINO_ACID_RESIDUE",e}return(0,M.Z)(i,u),(0,m.Z)(i,[{key:"ngOnInit",value:function(){null!=this.substance&&null!=this.substance.protein&&null!=this.substance.protein.subunits&&this.substance.protein.subunits.length?(this.subunits=this.substance.protein.subunits,this.countUpdate.emit(this.subunits.length),this.cvType="AMINO_ACID_RESIDUE",this.substanceType="protein",this.getVocabularies(),this.uuid=this.substance.uuid):null!=this.substance&&null!=this.substance.nucleicAcid&&null!=this.substance.nucleicAcid.subunits&&this.substance.nucleicAcid.subunits.length&&(this.subunits=this.substance.nucleicAcid.subunits,this.countUpdate.emit(this.subunits.length),this.cvType="NUCLEIC_ACID_BASE",this.substanceType="nucleicAcid",this.getVocabularies(),this.uuid=this.substance.uuid)}},{key:"ngAfterViewInit",value:function(){var t=this;this.substanceUpdated.subscribe(function(e){t.substance=e,t.uuid=t.substance.uuid,t.substance.protein?t.subunits=t.substance.protein.subunits:t.substance.nucleicAcid&&(t.subunits=t.substance.nucleicAcid.subunits),t.countUpdate.emit(t.subunits.length)})}},{key:"getVocabularies",value:function(){var t=this;this.cvService.getDomainVocabulary(this.cvType).subscribe(function(e){t.vocabulary=e[t.cvType].dictionary,t.processSubunits()},function(e){t.processSubunits()})}},{key:"processSubunits",value:function(){var t=this;this.subunits.forEach(function(e){var c={fullSequence:e.sequence,subunitIndex:e.subunitIndex,uuid:e.uuid,sequencesSectionGroups:[]};t.subunitSequences.push(c),t.addSequenceSectionsGroup(c,e.sequence)})}},{key:"addSequenceSectionsGroup",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=50;if(e.length>c+1){var l={sequenceSections:[]};t.sequencesSectionGroups.push(l);var g=e.substr(c,r);this.addSequenceSections(l,g,c),g.length===r&&this.addSequenceSectionsGroup(t,e,c+=r)}}},{key:"addSequenceSections",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:9,g=10;if(""!==e){for(var b={sectionNumber:0,sectionUnits:[]};r<=l&&e[r];){var v={unitIndex:r+c+1,unitValue:e[r]};this.vocabulary[v.unitValue.toUpperCase()]||(v.class="error"),b.sectionUnits.push(v),r++}b.sectionNumber=r+c,t.sequenceSections.push(b),e.length>r&&this.addSequenceSections(t,e,c,r,l+=g)}}},{key:"getTooltipMessage",value:function(t,e,c){var r;return r=this.vocabulary[c.toUpperCase()]?this.vocabulary[c.toUpperCase()].display:"UNDEFINED","".concat(t," - ").concat(e,": ").concat(c.toUpperCase()," (").concat(r,")")}},{key:"updateView",value:function(t){this.gaService.sendEvent(this.analyticsEventCategory,"button:view-update",t.value),this.view=t.value}}])}(T.B);return s.\u0275fac=function(i){return new(i||s)(n.Y36(q.I),n.Y36(A.$))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-substance-subunits"]],features:[n.qOj],decls:9,vars:4,consts:[[1,"filters-container"],[3,"value","change"],["aria-label","View List","value","details"],["svgIcon","list"],["aria-label","View Raw","value","raw"],["svgIcon","view_stream"],[3,"ngClass"],["class","subunit-sequence",4,"ngFor","ngForOf"],["class","subunit",4,"ngFor","ngForOf"],[1,"subunit-sequence"],[1,"form-row","subunit-row"],[1,"subunit-label"],["target","_blank",1,"subunit-title",3,"routerLink","queryParams"],["svgIcon","open_in_new",1,"icon","small-icon"],[1,"responsive"],["class","sequence-section-group",4,"ngFor","ngForOf"],[1,"sequence-section-group"],["class","sequence-section","class","sequence-section",3,"ngClass",4,"ngFor","ngForOf"],[1,"sequence-section",3,"ngClass"],[1,"section-number"],[1,"section-units-container"],["class","section-unit  selectedSite siteref",3,"ngClass","matTooltip",4,"ngFor","ngForOf"],[1,"section-unit","selectedSite","siteref",3,"ngClass","matTooltip"],[1,"subunit"],[1,"raw-sequence"]],template:function(i,o){1&i&&(n.TgZ(0,"div",0),n.TgZ(1,"mat-button-toggle-group",1),n.NdJ("change",function(e){return o.updateView(e)}),n.TgZ(2,"mat-button-toggle",2),n._UZ(3,"mat-icon",3),n.qZA(),n.TgZ(4,"mat-button-toggle",4),n._UZ(5,"mat-icon",5),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",6),n.YNc(7,E,11,9,"div",7),n.YNc(8,J,5,2,"div",8),n.qZA()),2&i&&(n.xp6(1),n.Q6J("value",o.view),n.xp6(5),n.Q6J("ngClass",o.view),n.xp6(1),n.Q6J("ngForOf",o.subunitSequences),n.xp6(1),n.Q6J("ngForOf",o.subunits))},directives:[p.A9,p.Yi,C.Hw,d.mk,d.sg,x.yS,y.gM],styles:[".filters-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}.subunit-title[_ngcontent-%COMP%]{color:var(--link-color);text-decoration:none}.subunit-label[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;padding-bottom:5px}.sequence-container[_ngcontent-%COMP%]{padding-top:20px}error[_ngcontent-%COMP%]{color:var(--regular-red-color)}.subunit-row[_ngcontent-%COMP%]{padding-top:10px}.details[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:none}.details[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%], .show[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}.raw[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:block}.raw[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%]{display:none}.subunit-sequence[_ngcontent-%COMP%]{margin-bottom:30px}.sequence-section-group[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;margin-bottom:10px}.section-number[_ngcontent-%COMP%]{text-align:right;font-size:.8em}.sequence-section[_ngcontent-%COMP%]{-ms-flex-positive:0;flex-grow:0;padding:0 10px;-ms-flex-preferred-size:20%;flex-basis:20%;-ms-flex-negative:0;flex-shrink:0}.section-units-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.section-units-container[_ngcontent-%COMP%]   .section-unit[_ngcontent-%COMP%]:hover{cursor:default}.subunit[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:20px}.subunit[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--box-shadow-color-3)}.raw-sequence[_ngcontent-%COMP%]{word-break:break-all;line-height:26px}.siteref[_ngcontent-%COMP%]{display:block;width:15.5px!important;text-align:center}.last-section[_ngcontent-%COMP%]{-ms-flex-preferred-size:0!important;flex-basis:0!important}.mat-icon[_ngcontent-%COMP%]{height:15px!important;width:15px!important}"]}),s}(),D=a(64061),Q=function(){var s=(0,m.Z)(function u(){(0,h.Z)(this,u)});return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=n.oAB({type:s}),s.\u0275inj=n.cJS({imports:[[d.ez,D.o.forChild(k),y.AV,p.vV,C.Ps,x.Bz]]}),s}()}}]);
//# sourceMappingURL=7398.72fbef2e9eea7075.js.map