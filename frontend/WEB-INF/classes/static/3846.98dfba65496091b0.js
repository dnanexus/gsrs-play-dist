"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[3846],{53846:function(ie,S,i){i.r(S),i.d(S,{SubstanceFormSimplifiedCodesModule:function(){return te}});var g=i(48047),C=i(78069),f=i(36362),M=i(32090),P=i(10853),A=i(98568),y=i(20265),D=i(24582),I=i(79550),J=i(33567),E=i(40104),N=i(26562),Q=i(80155),Y=i(66452),e=i(76442),z=i(78444),v=i(44770),h=i(43365),l=i(90587),b=i(26439),U=i(51279),L=i(18291),k=i(63169),x=i(87317),T=i(40089),O=i(65590),V=i(16667),$=i(84577);function j(o,s){if(1&o){var n=e.EpF();e.TgZ(0,"div",10),e._uU(1," Deleted\xa0 "),e.TgZ(2,"button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw().undoDelete()}),e._UZ(3,"mat-icon",12),e.qZA(),e.qZA()}}var H=function(){var o=function(){return(0,g.Z)(function s(n,t){(0,C.Z)(this,s),this.cvService=n,this.utilsService=t,this.codeDeleted=new e.vpe,this.codeSystemList=[],this.codeTypeList=[]},[{key:"ngOnInit",value:function(){this.getVocabularies(),this.privateCode.access=["protected"]}},{key:"code",get:function(){return this.privateCode},set:function(t){this.privateCode=t}},{key:"getVocabularies",value:function(){var t=this;this.cvService.getDomainVocabulary("CODE_SYSTEM","CODE_TYPE").subscribe(function(a){t.codeSystemList=a.CODE_SYSTEM.list,t.codeSystemDictionary=a.CODE_SYSTEM.dictionary,t.setCodeSystemType(),t.codeTypeList=a.CODE_TYPE.list})}},{key:"deleteCode",value:function(){var t=this;this.privateCode.$$deletedCode=this.utilsService.newUUID(),!this.privateCode.codeSystem&&!this.privateCode.type&&!this.privateCode.code&&(this.deleteTimer=setTimeout(function(){t.codeDeleted.emit(t.privateCode)},2e3))}},{key:"trimWhitespace",value:function(t){this.code.url=t,this.privateCode.url=this.privateCode.url.replace(/[\u200A|\u2009|\u2006|\u2008]/g," ").trim(),this.privateCode.url=t.trim().trim().trim()}},{key:"undoDelete",value:function(){clearTimeout(this.deleteTimer),delete this.privateCode.$$deletedCode}},{key:"setCodeSystemType",value:function(t){t&&(this.code.codeSystem=t),null!=this.privateCode&&null!=this.codeSystemDictionary&&(this.codeSystemType=this.codeSystemDictionary[this.privateCode.codeSystem]&&this.codeSystemDictionary[this.privateCode.codeSystem].systemCategory||"")}},{key:"updateAccess",value:function(t){this.code.access=t}}])}();return o.\u0275fac=function(n){return new(n||o)(e.Y36(L.I),e.Y36(k.FW))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-code-form"]],inputs:{code:"code"},outputs:{codeDeleted:"codeDeleted"},decls:11,vars:4,consts:[[1,"code-form-container"],["class","notification-backdrop",4,"ngIf"],[1,"form-row"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete code",3,"click"],["svgIcon","delete_forever"],["required","true","key","Code System","title","Code System","name","code",1,"code-system",3,"model","valueChange"],[1,"code"],["matInput","","placeholder","Code","required","","name","code",3,"ngModel","ngModelChange"],[3,"access","accessOut"],[1,"notification-backdrop"],["mat-icon-button","","matTooltip","Undo",3,"click"],["svgIcon","undo"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,j,4,0,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return t.deleteCode()}),e._UZ(5,"mat-icon",5),e.qZA(),e.qZA(),e.TgZ(6,"app-cv-input",6),e.NdJ("valueChange",function(d){return t.setCodeSystemType(d)}),e.qZA(),e.TgZ(7,"mat-form-field",7),e.TgZ(8,"input",8),e.NdJ("ngModelChange",function(d){return t.code.code=d}),e.qZA(),e.qZA(),e.TgZ(9,"div"),e.TgZ(10,"app-access-manager",9),e.NdJ("accessOut",function(d){return t.updateAccess(d)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",t.code.$$deletedCode),e.xp6(5),e.Q6J("model",t.code.codeSystem),e.xp6(2),e.Q6J("ngModel",t.code.code),e.xp6(2),e.Q6J("access",t.code.access))},directives:[f.O5,x.lW,T.gM,O.Hw,V.S,v.KE,h.Nt,l.Fj,l.Q7,l.JJ,l.On,$.h],styles:[".code-form-container[_ngcontent-%COMP%]{padding:10px 3px 4px;position:relative}.collapse[_ngcontent-%COMP%]{padding:10px 5px 6px;position:relative}.resolve[_ngcontent-%COMP%]{padding:0 20px 20px 0;color:var(--primary-color)}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;display:-ms-flexbox;display:flex;z-index:10;background-color:var(--notif-backdrop-bg-color);-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:var(--notif-backdrop-color)}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;padding:0 10px;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .code-system[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.form-row[_ngcontent-%COMP%]   .code-text[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .url[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.key-value-pair[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-item-align:start;align-self:flex-start}.key-value-pair[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{font-size:11px;padding-bottom:3.5px;line-height:11px;color:var(--dark-label-color);font-weight:400;font-family:Roboto,Helvetica Neue,sans-serif}.key-value-pair[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:15.5px}.references-container[_ngcontent-%COMP%]{width:100%}"]}),o}(),F=i(19975);function w(o,s){if(1&o&&(e.TgZ(0,"mat-form-field",5),e._UZ(1,"input",6),e.qZA()),2&o){var n=e.oxw();e.Q6J("floatLabel","never"),e.xp6(1),e.Q6J("formControl",n.searchControl)}}var Z=function(){return[5,10,25,100]};function R(o,s){if(1&o){var n=e.EpF();e.TgZ(0,"mat-paginator",7),e.NdJ("page",function(d){e.CHM(n);var c=e.oxw();return c.pageChange(d,c.analyticsEventCategory)}),e.qZA()}if(2&o){var t=e.oxw();e.Q6J("length",t.filtered&&t.filtered.length||0)("pageIndex",t.page)("pageSize",10)("pageSizeOptions",e.DdM(4,Z))}}function B(o,s){1&o&&e._UZ(0,"mat-divider",11),2&o&&e.Q6J("inset",!0)}function X(o,s){if(1&o){var n=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"app-code-form",9),e.NdJ("codeDeleted",function(p){return e.CHM(n),e.oxw().deleteCode(p)}),e.qZA(),e.YNc(2,B,1,1,"mat-divider",10),e.qZA()}if(2&o){var t=s.$implicit,a=s.last,d=s.index,c=e.oxw();e.Q6J("id","substance-code-"+d),e.xp6(1),e.Q6J("code",t)("show",c.expanded),e.xp6(1),e.Q6J("ngIf",!a)}}function K(o,s){if(1&o){var n=e.EpF();e.TgZ(0,"mat-paginator",7),e.NdJ("page",function(d){e.CHM(n);var c=e.oxw();return c.pageChange(d,c.analyticsEventCategory)}),e.qZA()}if(2&o){var t=e.oxw();e.Q6J("length",t.filtered&&t.filtered.length||0)("pageIndex",t.page)("pageSize",10)("pageSizeOptions",e.DdM(4,Z))}}var _=function(){var o=function(s){function n(t,a,d,c){var r;return(0,C.Z)(this,n),r=function W(o,s,n){return s=(0,y.Z)(s),(0,P.Z)(o,(0,A.Z)()?Reflect.construct(s,n||[],(0,y.Z)(o).constructor):s.apply(o,n))}(this,n,[c]),r.substanceFormCodesService=t,r.substanceFormService=a,r.scrollToService=d,r.gaService=c,r.subscriptions=[],r.pageSize=10,r.expanded=!0,r.validate=!1,r.analyticsEventCategory="substance form codes",r}return(0,D.Z)(n,s),(0,g.Z)(n,[{key:"ngOnInit",value:function(){this.menuLabelUpdate.emit("Codes")}},{key:"collapse",value:function(){this.expanded=!this.expanded}},{key:"ngAfterViewInit",value:function(){var a=this,d=this.substanceFormService.definition.subscribe(function(p){p.definitionType&&"ALTERNATIVE"===p.definitionType?a.hiddenStateUpdate.emit(!0):(a.canAddItemUpdate.emit(!0),a.hiddenStateUpdate.emit(!1))});this.subscriptions.push(d);var c=this.substanceFormCodesService.substanceCodes.subscribe(function(p){a.codes=p,a.filtered=p;var m=a.searchControl.valueChanges.subscribe(function(u){a.filterList(u,a.codes,a.analyticsEventCategory)},function(u){console.log(u)});a.subscriptions.push(m),a.page=0,a.pageChange()});this.subscriptions.push(c);var r=(0,N.a)([this.substanceFormService.simplifiedForm,this.substanceFormCodesService.substanceCodes.pipe((0,Q.P)())]).subscribe({next:function(m){var u=(0,M.Z)(m,2);u[0]&&0==u[1].length&&a.addDefaultSubstanceCode()},error:function(m){console.error(m)}});this.subscriptions.push(r)}},{key:"ngOnDestroy",value:function(){this.componentDestroyed.emit(),this.subscriptions.forEach(function(a){a.unsubscribe()})}},{key:"addItem",value:function(){this.addCode()}},{key:"addDefaultSubstanceCode",value:function(){this.substanceFormCodesService.addSubstanceCode({codeSystem:"CAS",access:["protected"]})}},{key:"addCode",value:function(){var a=this;this.substanceFormCodesService.addSubstanceCode(),setTimeout(function(){a.scrollToService.scrollToElement("substance-code-0","center")})}},{key:"deleteCode",value:function(a){this.substanceFormCodesService.deleteSubstanceCode(a)}}])}(I.u);return o.\u0275fac=function(n){return new(n||o)(e.Y36(Y.W),e.Y36(J.B),e.Y36(z.i),e.Y36(E.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-substance-form-codes-card"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"flex-row"],["class","search",3,"floatLabel",4,"ngIf"],[1,"middle-fill"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],["class","code","appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],[1,"search",3,"floatLabel"],["matInput","","placeholder","Search",3,"formControl"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["appScrollToTarget","",1,"code",3,"id"],[3,"code","show","codeDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,w,2,2,"mat-form-field",1),e._UZ(2,"span",2),e.qZA(),e.YNc(3,R,1,5,"mat-paginator",3),e.YNc(4,X,3,4,"div",4),e.YNc(5,K,1,5,"mat-paginator",3)),2&n&&(e.xp6(1),e.Q6J("ngIf",t.codes&&t.codes.length>t.pageSize),e.xp6(2),e.Q6J("ngIf",t.codes&&t.codes.length>5),e.xp6(1),e.Q6J("ngForOf",t.paged),e.xp6(1),e.Q6J("ngIf",t.codes&&t.codes.length>5))},directives:[f.O5,v.KE,h.Nt,l.Fj,l.JJ,l.oH,b.NW,f.sg,U.P,H,F.d],styles:[".mat-divider.mat-divider-inset[_ngcontent-%COMP%]{margin-left:0}.mat-divider[_ngcontent-%COMP%]{border-top-color:var(--text-color)}.code[_ngcontent-%COMP%]:nth-child(odd){background-color:var(--nth-child-color-2)}.code[_ngcontent-%COMP%]:nth-child(odd)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:var(--nth-child-color-3)}.code[_ngcontent-%COMP%]:nth-child(even)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:var(--nth-child-color-1)}.code[_ngcontent-%COMP%]     .mat-expansion-panel, .code[_ngcontent-%COMP%]     .mat-table, .code[_ngcontent-%COMP%]     textarea{background-color:var(--regular-transparent-color)}.search[_ngcontent-%COMP%]{width:400px;max-width:100%}"]}),o}(),G=i(75143),q=i(7168),ee=i(94673),te=(i(64061),function(){var o=(0,g.Z)(function s(){(0,C.Z)(this,s)});return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.ez,G.o0.forChild(_),q.O,F.t,O.Ps,x.ot,ee.w,v.lN,l.UX,l.u5,b.TU,h.c,T.AV]]}),o}())}}]);
//# sourceMappingURL=3846.98dfba65496091b0.js.map