"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[223],{30223:function(ge,N,a){a.r(N),a.d(N,{SubstanceFormSimplifiedNamesModule:function(){return ue}});var v=a(48047),g=a(78069),f=a(36362),I=a(32090),P=a(10853),J=a(98568),S=a(20265),A=a(24582),D=a(79550),y=a(33567),z=a(40104),U=a(26562),w=a(80155),E=a(53141),b=a(39756),e=a(76442),Q=a(78444),h=a(44770),C=a(43365),l=a(90587),x=a(26439),Y=a(51279),L=a(42827),k=a(52149),j=a(99146),B=a(95758),H=a(54244),F=a(87317),T=a(40089),O=a(65590),$=a(16667),R=a(84577);function V(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"div",11),e._uU(1," Deleted\xa0 "),e.TgZ(2,"button",12),e.NdJ("click",function(){return e.CHM(n),e.oxw().undoDelete()}),e._UZ(3,"mat-icon",13),e.qZA(),e.qZA()}}function X(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(){return e.CHM(n),e.oxw().resolve()}),e._uU(1,"resolve"),e.qZA()}}var K=function(){var o=function(){return(0,v.Z)(function r(n,t,i,s,c,p){(0,g.Z)(this,r),this.cvService=n,this.utilsService=t,this.dialog=i,this.substanceFormService=s,this.overlayContainerService=c,this.nameFormService=p,this.priorityUpdate=new e.vpe,this.nameDeleted=new e.vpe,this.nameControl=new l.NI(""),this.nameTypeControl=new l.NI(""),this.subscriptions=[],this.substanceType="",this.viewFull=!0,this.showStd=!1},[{key:"ngOnInit",value:function(){var t=this;this.overlayContainer=this.overlayContainerService.getContainerElement(),this.substanceFormService.definition.subscribe(function(s){t.substanceType=s.substanceClass}).unsubscribe(),this.privateName.access=["protected"]}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(t){t.unsubscribe()})}},{key:"show",get:function(){return this.viewFull||null},set:function(t){null!=t&&(this.viewFull=t)}},{key:"standardized",get:function(){return this.showStd},set:function(t){null!=t&&(this.showStd=t)}},{key:"name",get:function(){return this.privateName||{}},set:function(t){null!=t&&(this.privateName=t,(!this.privateName.languages||0===this.privateName.languages.length)&&(this.privateName.languages=["en"]),this.privateName.type||(this.privateName.type="cn"))}},{key:"updateAccess",value:function(t){this.privateName.access=t}},{key:"deleteName",value:function(){var t=this;this.privateName.$$deletedCode=this.utilsService.newUUID(),!this.privateName.name&&!this.privateName.type&&(this.deleteTimer=setTimeout(function(){t.nameDeleted.emit(t.privateName)},2e3))}},{key:"undoDelete",value:function(){clearTimeout(this.deleteTimer),delete this.privateName.$$deletedCode}},{key:"resolve",value:function(){var t=this,i=this.dialog.open(j.a,{height:"auto",width:"800px",data:{name:this.privateName.name}});this.overlayContainer.style.zIndex="1002",i.afterClosed().subscribe(function(s){t.overlayContainer.style.zIndex=null,null!=s&&""!==s&&t.substanceFormService.resolvedName(s)},function(){})}},{key:"preventNewLine",value:function(t){"Enter"===t.key&&t.preventDefault()}}])}();return o.\u0275fac=function(n){return new(n||o)(e.Y36(L.I),e.Y36(k.F),e.Y36(B.uw),e.Y36(y.B),e.Y36(H.Xj),e.Y36(b.w))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-name-form"]],inputs:{show:"show",standardized:"standardized",name:"name"},outputs:{priorityUpdate:"priorityUpdate",nameDeleted:"nameDeleted"},decls:12,vars:6,consts:[[1,"name-form-container",3,"ngClass"],["class","notification-backdrop",4,"ngIf"],[1,"form-row"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete name",3,"click"],["svgIcon","delete_forever"],[1,"name"],["matInput","","placeholder","Name","required","","name","name",1,"text-area",3,"ngModel","ngModelChange","keypress"],["class","resolve",3,"click",4,"ngIf"],["required","true","key","Name Type Code","title","Type",1,"name-type",3,"model","valueChange"],[3,"access","accessOut"],[1,"notification-backdrop"],["mat-icon-button","","matTooltip","Undo",3,"click"],["svgIcon","undo"],[1,"resolve",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,V,4,0,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return t.deleteName()}),e._UZ(5,"mat-icon",5),e.qZA(),e.qZA(),e.TgZ(6,"mat-form-field",6),e.TgZ(7,"textarea",7),e.NdJ("ngModelChange",function(s){return t.name.name=s})("keypress",function(s){return t.preventNewLine(s)}),e.qZA(),e.qZA(),e.YNc(8,X,2,0,"a",8),e.TgZ(9,"app-cv-input",9),e.NdJ("valueChange",function(s){return t.name.type=s}),e.qZA(),e.TgZ(10,"div"),e.TgZ(11,"app-access-manager",10),e.NdJ("accessOut",function(s){return t.updateAccess(s)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.Q6J("ngClass",t.viewFull?"name-form-container":"collapse"),e.xp6(1),e.Q6J("ngIf",t.name.$$deletedCode),e.xp6(6),e.Q6J("ngModel",t.name.name),e.xp6(1),e.Q6J("ngIf",t.name.name&&t.name.name.length>0&&"structure"===t.substanceType),e.xp6(1),e.Q6J("model",t.name.type),e.xp6(2),e.Q6J("access",t.name.access))},directives:[f.mk,f.O5,F.lW,T.gM,O.Hw,h.KE,C.Nt,l.Fj,l.Q7,l.JJ,l.On,$.S,R.h],styles:[".name-form-container[_ngcontent-%COMP%]{padding:10px 3px 4px;position:relative}.collapse[_ngcontent-%COMP%]{padding:10px 5px 6px;position:relative}.resolve[_ngcontent-%COMP%]{padding:0 20px 20px 0;color:var(--primary-color)}.text-area[_ngcontent-%COMP%]{height:12px}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;display:-ms-flexbox;display:flex;z-index:10;background-color:var(--notif-backdrop-bg-color);-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:var(--notif-backdrop-color)}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]{padding-bottom:18px}.form-row[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{padding-right:15px}.form-row[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .domains[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.form-row[_ngcontent-%COMP%]   .jurisdiction[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}"]}),o}(),Z=a(19975);function G(o,r){if(1&o&&(e.TgZ(0,"mat-form-field",5),e._UZ(1,"input",6),e.qZA()),2&o){var n=e.oxw();e.Q6J("floatLabel","never"),e.xp6(1),e.Q6J("formControl",n.searchControl)}}var M=function(){return[5,10,25,100]};function _(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"mat-paginator",7),e.NdJ("page",function(s){e.CHM(n);var c=e.oxw();return c.pageChange(s,c.analyticsEventCategory)}),e.qZA()}if(2&o){var t=e.oxw();e.Q6J("length",t.filtered&&t.filtered.length||0)("pageIndex",t.page)("pageSize",10)("pageSizeOptions",e.DdM(4,M))}}function q(o,r){1&o&&e._UZ(0,"mat-divider",11),2&o&&e.Q6J("inset",!0)}function ee(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"app-name-form",9),e.NdJ("priorityUpdate",function(m){return e.CHM(n),e.oxw().priorityUpdated(m)})("nameDeleted",function(m){return e.CHM(n),e.oxw().deleteName(m)}),e.qZA(),e.YNc(2,q,1,1,"mat-divider",10),e.qZA()}if(2&o){var t=r.$implicit,i=r.last,s=r.index,c=e.oxw();e.Q6J("id","substance-name-"+s),e.xp6(1),e.Q6J("name",t)("standardized",c.showStd),e.xp6(1),e.Q6J("ngIf",!i)}}function te(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"mat-paginator",7),e.NdJ("page",function(s){e.CHM(n);var c=e.oxw();return c.pageChange(s,c.analyticsEventCategory)}),e.qZA()}if(2&o){var t=e.oxw();e.Q6J("length",t.filtered&&t.filtered.length||0)("pageIndex",t.page)("pageSize",10)("pageSizeOptions",e.DdM(4,M))}}var ne=function(){var o=function(r){function n(t,i,s,c,p){var m;return(0,g.Z)(this,n),m=function W(o,r,n){return r=(0,S.Z)(r),(0,P.Z)(o,(0,J.Z)()?Reflect.construct(r,n||[],(0,S.Z)(o).constructor):r.apply(o,n))}(this,n,[c]),m.substanceFormNamesService=t,m.substanceFormService=i,m.scrollToService=s,m.gaService=c,m.configService=p,m.subscriptions=[],m.pageSize=10,m.showStd=!0,m.standardizeButton=!1,m.analyticsEventCategory="substance form names",m}return(0,A.Z)(n,r),(0,v.Z)(n,[{key:"ngOnInit",value:function(){var i=this;this.menuLabelUpdate.emit("Substance Names"),this.appId=this.configService.environment.appId,this.standardizeButton=this.configService.configData.showNameStandardizeButton||!1;var s=this.substanceFormService.definition.subscribe(function(m){m.definitionType&&"ALTERNATIVE"===m.definitionType?i.hiddenStateUpdate.emit(!0):(i.canAddItemUpdate.emit(!0),i.hiddenStateUpdate.emit(!1))});this.subscriptions.push(s);var c=this.substanceFormNamesService.substanceNames.subscribe(function(m){i.names=m,i.filtered=m;var d=i.searchControl.valueChanges.subscribe(function(u){i.filterList(u,i.names,i.analyticsEventCategory)},function(u){console.log(u)});i.subscriptions.push(d),i.page=0,i.pageChange()});this.subscriptions.push(c);var p=(0,U.a)([this.substanceFormService.simplifiedForm,this.substanceFormNamesService.substanceNames.pipe((0,w.P)())]).subscribe({next:function(d){var u=(0,I.Z)(d,2);u[0]&&0==u[1].length&&i.addDefaultSubstanceName()},error:function(d){console.error(d)}});this.subscriptions.push(p)}},{key:"ngAfterViewInit",value:function(){}},{key:"standardize",value:function(){}},{key:"ngOnDestroy",value:function(){this.componentDestroyed.emit(),this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"addDefaultSubstanceName",value:function(){this.substanceFormNamesService.addSubstanceName({displayName:!0,name:"",access:["protected"]})}},{key:"addItem",value:function(){this.addName()}},{key:"addName",value:function(){var i=this;this.substanceFormNamesService.addSubstanceName(),setTimeout(function(){i.scrollToService.scrollToElement("substance-name-0","center")})}},{key:"priorityUpdated",value:function(i){this.names.forEach(function(s){s!==i&&(s.displayName=!1)})}},{key:"deleteName",value:function(i){this.substanceFormNamesService.deleteSubstanceName(i)}}])}(D.u);return o.\u0275fac=function(n){return new(n||o)(e.Y36(b.w),e.Y36(y.B),e.Y36(Q.i),e.Y36(z.$),e.Y36(E.E))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-substance-form-names-card"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"flex-row"],["class","search",3,"floatLabel",4,"ngIf"],[1,"middle-fill"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],["class","name","appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],[1,"search",3,"floatLabel"],["matInput","","placeholder","Search",3,"formControl"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["appScrollToTarget","",1,"name",3,"id"],[3,"name","standardized","priorityUpdate","nameDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,G,2,2,"mat-form-field",1),e._UZ(2,"span",2),e.qZA(),e.YNc(3,_,1,5,"mat-paginator",3),e.YNc(4,ee,3,4,"div",4),e.YNc(5,te,1,5,"mat-paginator",3)),2&n&&(e.xp6(1),e.Q6J("ngIf",t.names&&t.names.length>t.pageSize),e.xp6(2),e.Q6J("ngIf",t.names&&t.names.length>5),e.xp6(1),e.Q6J("ngForOf",t.paged),e.xp6(1),e.Q6J("ngIf",t.names&&t.names.length>5))},directives:[f.O5,h.KE,C.Nt,l.Fj,l.JJ,l.oH,x.NW,f.sg,Y.P,K,Z.d],styles:[".mat-divider.mat-divider-inset[_ngcontent-%COMP%]{margin-left:0}.mat-divider[_ngcontent-%COMP%]{border-top-color:var(--text-color)}.name[_ngcontent-%COMP%]:nth-child(odd){background-color:var(--nth-child-color-2)}.name[_ngcontent-%COMP%]:nth-child(odd)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:var(--nth-child-color-3)}.name[_ngcontent-%COMP%]:nth-child(even)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:var(--nth-child-color-1)}.name[_ngcontent-%COMP%]     .mat-expansion-panel, .name[_ngcontent-%COMP%]     .mat-table, .name[_ngcontent-%COMP%]     textarea{background-color:var(--regular-transparent-color)}.search[_ngcontent-%COMP%]{width:400px;max-width:100%}"]}),o}(),ae=a(64061),oe=a(7168),ie=a(94673),se=a(68390),re=a(61534),me=a(70178),ce=a(16531),le=a(97217),de=a(91434),pe=a(88547),ue=function(){var o=(0,v.Z)(function r(){(0,g.Z)(this,r)});return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.ez,ae.o.forChild(ne),oe.O,Z.t,O.Ps,F.ot,ie.w,h.lN,l.UX,l.u5,x.TU,C.c,se.Fk,re.p9,ce.To,le.p0,me.g,de.LD,T.AV,pe.J]]}),o}()}}]);
//# sourceMappingURL=223.b5ce5250f78a271d.js.map